/* Import animations */
@import './styles/animations.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Typing Animation Keyframes */
@keyframes blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

.animate-blink {
  animation: blink 1s infinite;
}

/* Bot Avatar Fade-In Animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.bot-avatar {
  animation: fadeInUp 0.3s ease-out;
}

/* Typing Indicator Animation */
@keyframes typingDots {
  0%, 60%, 100% { 
    opacity: 0.3; 
    transform: scale(1);
  }
  30% { 
    opacity: 1; 
    transform: scale(1.1);
  }
}

.typing-indicator .dot {
  width: 8px;
  height: 8px;
  background: currentColor;
  border-radius: 50%;
  opacity: 0.3;
  animation: typingDots 1.4s infinite;
}

.typing-indicator .dot:nth-child(1) { animation-delay: 0s; }
.typing-indicator .dot:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator .dot:nth-child(3) { animation-delay: 0.4s; }

@layer base {
  :root {
    --navbar-height: 4rem;
  }
  
  html {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
  
  body {
    @apply bg-canvas text-slate-ink;
  }
}

@layer components {
  .gradient-primary {
    @apply bg-gradient-to-r from-primary-600 to-primary-500;
  }
  
  .gradient-hero {
    @apply bg-gradient-to-br from-canvas via-white to-canvas;
  }
  
  .glass-effect {
    @apply bg-canvas/80 backdrop-blur-sm border border-white/20;
  }
  
  /* Seamless textarea - completely remove borders like Ilara */
  .textarea-seamless {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
  }
  
  .textarea-seamless:focus {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    ring: none !important;
  }
  
  /* Data collection animations */
  .data-collected-item {
    animation: slideIn 0.3s ease-out;
  }
  
  .valuation-preview-item {
    animation: fadeInUp 0.5s ease-out;
  }
  
  .progress-bar-animation {
    transition: width 0.5s ease-in-out;
  }
  
  .card-elevated {
    @apply bg-white rounded-xl shadow-elevated;
  }
}

/* Custom animations */
@keyframes pulse-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-pulse-slow {
  animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Dropzone styles */
.dropzone {
  @apply border-2 border-dashed border-gray-300 rounded-xl p-8 text-center transition-all duration-200 cursor-pointer;
}

.dropzone:hover {
  @apply border-primary-500 bg-primary-50/50;
}

.dropzone.active {
  @apply border-primary-600 bg-primary-50 scale-[1.02];
}

/* Loading skeleton */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton {
  @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200;
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
}

/* Keyframe animations for lovable experience */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Valuation Report Preview Styles (Google Docs / Print Preview Style) */
.valuation-report-preview {
  background-color: #F3F4F6; /* Gray-100 background for the preview area */
  padding: 40px;
  min-height: 100%;
}

.valuation-report-preview .page {
  width: 210mm;
  min-height: 297mm;
  padding: 2cm 1.5cm;
  margin: 0 auto 40px auto;
  background: white;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  position: relative;
  box-sizing: border-box;
}

/* Ensure content inside pages behaves correctly */
.valuation-report-preview .page * {
  max-width: 100%;
}

@media print {
  .valuation-report-preview {
    background: white;
    padding: 0;
  }
  
  .valuation-report-preview .page {
    box-shadow: none;
    margin: 0;
    width: 100%;
    page-break-after: always;
  }
}

/* ==========================================================================
   Bank-Grade Typography & Report Styling (Ported from Backend base.html)
   
   SYNC WARNING:
   These styles are a port of the Jinja2 template styles found in:
   apps/upswitch-valuation-engine/src/templates/accountant_view/base.html
   
   Any changes to the PDF report styling must be manually reflected here
   to keep the Preview consistent.
   ========================================================================== */

/* Cover Sheet Style for Preview */
.valuation-report-preview .cover-sheet {
  width: 210mm;
  min-height: 297mm;
  margin: 24px auto;
  background: white;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  position: relative;
  page-break-after: always;
  /* No padding on container, to allow full bleed design */
}

/* CSS Variables for Colors */
.valuation-report-preview {
  --upswitch-navy: #2B303A; /* Slate Ink - Primary Text */
  --upswitch-blue: #4A5D4F; /* Sage Foundation - Primary Brand */
  --text-dark: #2B303A;     /* Slate Ink */
  --text-body: #4B5563;     /* Slate-600 */
  --text-muted: #6B7280;    /* Slate-500 */
  --bg-subtle: #F4F1EA;     /* Canvas */
  --border-light: #E2E8F0;  /* Slate-200 */
  
  /* Base Font settings */
  font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 11pt;
  line-height: 1.5;
  color: #2B303A;
}

/* Reset internal elements */
.valuation-report-preview .page * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Headers */
.valuation-report-preview h1 {
  font-family: 'Inter', sans-serif;
  font-size: 28pt;
  font-weight: 800;
  color: var(--text-dark);
  margin-top: 48pt;
  margin-bottom: 24pt;
  padding: 0;
  page-break-after: avoid;
  border-bottom: none;
  letter-spacing: -0.5pt;
  line-height: 1.1;
}

.valuation-report-preview .hero-header {
  font-size: 64pt;
  font-weight: 800;
  line-height: 0.9;
  letter-spacing: -2pt;
  color: var(--upswitch-navy);
  margin-bottom: 24pt;
}

.valuation-report-preview h2 {
  font-family: 'Inter', sans-serif;
  font-size: 18pt;
  font-weight: 700;
  color: var(--text-dark);
  margin-top: 32pt;
  margin-bottom: 16pt;
  page-break-after: avoid;
  text-transform: none;
  letter-spacing: -0.25pt;
}

.valuation-report-preview h3 {
  font-family: 'Inter', sans-serif;
  font-size: 14pt;
  font-weight: 600;
  color: var(--text-dark);
  margin-top: 24pt;
  margin-bottom: 12pt;
  page-break-after: avoid;
}

.valuation-report-preview p {
  margin-bottom: 12pt;
  text-align: left;
  color: var(--text-body);
}

/* Modern Cards & Grids */
.valuation-report-preview .grid-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32pt;
  margin-top: 24pt;
  margin-bottom: 24pt;
  padding: 0;
}

.valuation-report-preview .report-section .grid-layout {
  padding: 0;
}

.valuation-report-preview .stat-card {
  background-color: var(--bg-subtle);
  border-radius: 0;
  padding: 24pt;
  border: none;
}

.valuation-report-preview .stat-card .label {
  font-size: 10pt;
  text-transform: uppercase;
  letter-spacing: 1pt;
  color: var(--text-muted);
  font-weight: 600;
  margin-bottom: 8pt;
}

.valuation-report-preview .stat-card .value {
  font-size: 32pt;
  font-weight: 700;
  color: var(--upswitch-navy);
  line-height: 1.1;
}

/* Utility Classes */
.valuation-report-preview .font-bold {
  font-weight: 700 !important;
}

.valuation-report-preview .report-callout {
  background-color: var(--bg-subtle);
  border-left: 4pt solid var(--upswitch-navy);
  padding: 16pt;
  margin: 24pt 0;
  border-radius: 0 4pt 4pt 0;
}

.valuation-report-preview .report-callout.warning {
  background-color: #FAF5EB; /* Harvest Tint */
  border-left-color: #D9A558; /* Harvest */
}

.valuation-report-preview .report-callout.danger {
  background-color: #F5EBEA; /* Rust Tint */
  border-left-color: #B85C56; /* Rust */
}

.valuation-report-preview .report-callout p {
  margin-bottom: 8pt;
  color: var(--text-body);
}

/* The "Box" Container for Tables */
.valuation-report-preview .table-card {
  background: #FFFFFF;
  border: 1px solid #E2E8F0; /* Slate-200 */
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Subtle depth */
  overflow: hidden; /* Keeps rounded corners clean */
  margin-bottom: 24pt;
  page-break-inside: avoid;
}

/* Remove default table margins if inside a card to fit perfectly */
.valuation-report-preview .table-card .step-table,
.valuation-report-preview .table-card table {
  margin: 0;
  border-top: none; /* The card has the border */
  border-radius: 0;
}

/* Header background within card */
.valuation-report-preview .table-card .step-table th,
.valuation-report-preview .table-card table th {
  background-color: #F8FAFC;
  border-top: none;
}

/* Tables - Digital Authority & Academic Style */
.valuation-report-preview table,
.valuation-report-preview .step-table {
  width: 100%;
  margin-left: 0;
  margin-right: 0;
  border-collapse: separate;
  border-spacing: 0;
  margin-top: 24pt;
  margin-bottom: 24pt;
  font-family: 'Inter', sans-serif;
  font-size: 10pt;
  line-height: 1.6;
  border: none;
  border-top: 2px solid var(--upswitch-navy);
}

/* Remove side margins when table is inside report-section */
.valuation-report-preview .report-section table,
.valuation-report-preview .report-section .step-table {
  width: 100%;
  margin-left: 0;
  margin-right: 0;
}

.valuation-report-preview table caption {
  font-weight: 700;
  font-size: 10pt;
  text-transform: uppercase;
  letter-spacing: 0.5pt;
  margin-bottom: 12pt;
  padding: 12pt 16pt; /* Added padding for spacing */
  text-align: left;
  color: var(--text-muted);
}

.valuation-report-preview th,
.valuation-report-preview .step-table th {
  background-color: #F8FAFC; /* Academic/Formal header background */
  border-bottom: 1px solid #CBD5E1;
  font-weight: 700;
  color: var(--upswitch-navy);
  padding: 12pt 12pt;
  text-align: left;
  font-family: 'Inter', sans-serif;
  text-transform: uppercase;
  font-size: 9pt;
  letter-spacing: 0.05em;
  border-top: none;
  border-left: none;
  border-right: none;
}

.valuation-report-preview td,
.valuation-report-preview .step-table td {
  padding: 12pt 12pt;
  color: var(--text-body);
  border-bottom: 1px solid #E2E8F0;
  border-top: none;
  border-left: none;
  border-right: none;
  vertical-align: top;
}

/* Primary column emphasis for step-table */
.valuation-report-preview .step-table td:first-child {
  font-weight: 500;
  color: var(--upswitch-navy);
}

.valuation-report-preview tr:last-child td,
.valuation-report-preview .step-table tr:last-child td {
  border-bottom: 1px solid #CBD5E1; /* Matches header for framing */
}

.valuation-report-preview td.number,
.valuation-report-preview td.currency,
.valuation-report-preview td.percentage,
.valuation-report-preview th.text-right,
.valuation-report-preview td.text-right {
  text-align: right;
  font-variant-numeric: tabular-nums;
  white-space: nowrap; /* Prevent breaking numbers */
}

.valuation-report-preview tr:nth-child(even) {
  background-color: #FFFFFF; /* No stripes, just clean lines */
}

/* Valuation Box */
.valuation-report-preview .valuation-box {
  border: 1pt solid var(--border-light);
  padding: 24pt;
  margin: 24pt 0;
  text-align: center;
  background-color: var(--bg-subtle);
  border-radius: 4pt;
}

.valuation-report-preview .valuation-box .value {
  font-size: 28pt;
  font-weight: 800;
  margin: 12pt 0 16pt 0;
  color: var(--upswitch-navy);
  font-family: 'Inter', sans-serif;
  letter-spacing: -1pt;
}

.valuation-report-preview .valuation-box .label {
  font-size: 12pt;
  margin-bottom: 12pt;
  text-transform: uppercase;
  letter-spacing: 1pt;
  color: var(--text-muted);
  font-weight: 600;
}

/* Footer & Spacing */
.valuation-report-preview .footer {
  margin-top: 32pt;
  padding-top: 12pt;
  border-top: 1pt solid var(--border-light);
  font-size: 9pt;
  color: var(--text-muted);
}

.valuation-report-preview .text-center {
  text-align: center;
}

.valuation-report-preview .text-right {
  text-align: right;
}

.valuation-report-preview .spacing-small {
  margin-bottom: 6pt;
}

.valuation-report-preview .spacing-medium {
  margin-bottom: 12pt;
}

.valuation-report-preview .spacing-large {
  margin-bottom: 24pt;
}

/* Classification Banner */
.valuation-report-preview .classification-banner {
  background-color: #FFFFFF;
  border: 1pt solid var(--upswitch-navy);
  padding: 12pt;
  margin: 24pt 0;
  text-align: center;
  page-break-inside: avoid;
}

.valuation-report-preview .classification-banner.preliminary {
  background-color: #FEF2F2;
  border: 1px solid #FECACA;
  border-left: 4pt solid #EF4444;
  border-radius: 6px;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.valuation-report-preview .classification-banner.limited {
  background-color: #FFF7ED;
  border: 1px solid #FED7AA;
  border-left: 4pt solid #F97316;
  border-radius: 6px;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.valuation-report-preview .classification-banner h3 {
  margin: 0 0 6pt 0;
  color: var(--upswitch-navy);
  font-size: 12pt;
  text-transform: uppercase;
  letter-spacing: 0.5pt;
  font-weight: 700;
}

/* Table of Contents */
.valuation-report-preview ul.toc-list,
.valuation-report-preview ul.toc-sublist {
  list-style-type: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

.valuation-report-preview .toc-entry {
  list-style-type: none !important;
  margin-bottom: 8pt;
  display: block !important;
}

.valuation-report-preview .toc-entry > a {
  text-decoration: none;
  color: var(--upswitch-navy);
  display: block;
  font-weight: 700;
}

/* Section Numbering */
.valuation-report-preview .section-number {
  font-weight: bold;
  margin-right: 6pt;
}

/* List Styling (Fix for Global Reset) */
.valuation-report-preview ul,
.valuation-report-preview ol {
  margin-left: 36pt !important;
  padding-left: 18pt !important;
  list-style-position: outside !important;
  display: block !important;
  margin-bottom: 12pt;
}

.valuation-report-preview ul {
  list-style-type: disc !important;
}

.valuation-report-preview ol {
  list-style-type: decimal !important;
}

.valuation-report-preview li {
  display: list-item !important;
  list-style-position: outside !important;
  margin-bottom: 6pt;
  color: var(--text-body);
}

/* Status Badges */
.valuation-report-preview .status-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: 600;
  font-size: 9pt;
  white-space: nowrap;
}

.valuation-report-preview .status-badge.completed {
  background-color: #E9F0EB; /* Moss Tint */
  color: #6B8E72; /* Moss */
}

.valuation-report-preview .status-badge.skipped {
  background-color: #FAF5EB; /* Harvest Tint */
  color: #D9A558; /* Harvest */
}

.valuation-report-preview .status-badge.failed {
  background-color: #F5EBEA; /* Rust Tint */
  color: #B85C56; /* Rust */
}

.valuation-report-preview .status-badge.pending,
.valuation-report-preview .status-badge.not_executed {
  background-color: #EBE7DE; /* Stone 100 */
  color: #85827A; /* Stone 500 */
}
.valuation-report-preview div.flex.items-center.mb-4:has(svg.lucide-circle-check-big),
.valuation-report-preview div:has(> svg.lucide-circle-check-big):has(> h2),
.valuation-report-preview div:has(svg[class*="circle-check"]):has(h2) {
  display: none !important;
}
