"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{74181:function(t,e,n){n.r(e),n.d(e,{ValuationInfoPanel:function(){return s}});var a=n(57437),l=n(2265),r=n(61172),i=n(69419);let s=t=>{let{result:e}=t;return((0,l.useEffect)(()=>{var t,n;e.info_tab_html&&e.info_tab_html.length>0?i.Sc.info("ValuationInfoPanel: Using server-generated HTML",{component:"ValuationInfoPanel",valuationId:e.valuation_id,htmlLength:(null===(t=e.info_tab_html)||void 0===t?void 0:t.length)||0,renderingMode:"server-html"}):i.Sc.error("ValuationInfoPanel: info_tab_html not available",{component:"ValuationInfoPanel",valuationId:e.valuation_id,hasInfoTabHtml:!!e.info_tab_html,infoTabHtmlLength:(null===(n=e.info_tab_html)||void 0===n?void 0:n.length)||0,renderingMode:"error",reason:e.info_tab_html?"HTML too short":"HTML not present"})},[e.info_tab_html,e.valuation_id]),e.info_tab_html&&e.info_tab_html.length>0)?(0,a.jsx)("div",{className:"h-full overflow-y-auto info-tab-html px-4 sm:px-6 lg:px-8",dangerouslySetInnerHTML:{__html:r.C.sanitize(e.info_tab_html)}}):(0,a.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-8",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Info Tab Not Available"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"The calculation breakdown is not available. This may indicate an issue with the valuation response."}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsxs)("p",{children:["Valuation ID: ",e.valuation_id||"N/A"]}),(0,a.jsxs)("p",{children:["Info Tab HTML: ",e.info_tab_html?"Present but empty":"Not present"]})]})]})})}},61172:function(t,e,n){n.d(e,{C:function(){return l}});var a=n(1581);n(69419);class l{static extractCSS(t){let e;let n=/<style(?:\s+[^>]*)?>([\s\S]*?)<\/style>/gi,a="",l=t;for(;null!==(e=n.exec(t));)a+=e[1]+"\n",l=l.replace(e[0],"");return{css:a.trim(),html:l}}static sanitize(t){let e;if(!t||"string"!=typeof t)return"";let n="",l=t,r=!1;try{let e=this.extractCSS(t);n=e.css,l=e.html,r=n.length>0}catch(e){l=t,r=!1}try{e=a.default.sanitize(l,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","div","span","strong","em","b","i","u","ul","ol","li","br","hr","table","thead","tbody","tr","th","td","a","img","blockquote","pre","code","section","article","header","footer","style"],ALLOWED_ATTR:["class","id","style","href","src","alt","title","colspan","rowspan","align","valign","type","media"],ALLOW_DATA_ATTR:!0,ALLOW_UNKNOWN_PROTOCOLS:!1,FORCE_BODY:!0,KEEP_CONTENT:!0})}catch(t){return""}return"string"!=typeof e?"":r&&n.length>0&&!(e.includes("<style>")||e.includes("<style "))?"<style>".concat(n,"</style>").concat(e):e}static process(t){if(!t)return"";let e=this.sanitize(t);return this.processLinks(e)}static processLinks(t){return t.replace(/<a\s+href=/g,'<a target="_blank" rel="noopener noreferrer" href=')}static extractSections(t){if(!t||"string"!=typeof t)return[];try{let e=new DOMParser().parseFromString(t,"text/html").querySelectorAll("h2, h3, h4");return Array.from(e).map((t,e)=>({id:"section-".concat(e),title:t.textContent||"",level:parseInt(t.tagName.charAt(1),10)||2}))}catch(t){return[]}}static isSafe(t){return!t||this.sanitize(t)===t}}}}]);