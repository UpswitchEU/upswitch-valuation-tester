"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{3967:function(t,e,n){n.d(e,{pU:function(){return i}}),(r=a||(a={})).NOT_FOUND="NOT_FOUND",r.NETWORK_ERROR="NETWORK_ERROR",r.TIMEOUT="TIMEOUT",r.RATE_LIMITED="RATE_LIMITED",r.SERVER_ERROR="SERVER_ERROR",r.INVALID_INPUT="INVALID_INPUT",r.UNSUPPORTED_COUNTRY="UNSUPPORTED_COUNTRY",r.UNKNOWN_ERROR="UNKNOWN_ERROR";var r,a,o=n(39332),s=n(2784),i=()=>((0,o.usePathname)(),(0,o.useSearchParams)(),(0,s.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[]),null)},10877:function(t,e,n){n.d(e,{a:function(){return l}});var r=n(36559);let a=n.n(r)()({level:"production"===(void 0).MODE?"info":"debug",browser:{asObject:!0},transport:"production"!==(void 0).MODE?{target:"pino-pretty",options:{colorize:!0,translateTime:"HH:MM:ss",ignore:"pid,hostname"}}:void 0});class o{setCorrelationId(t){this.correlationId=t}getCorrelationId(){return this.correlationId}setValuationId(t){this.valuationId=t}getValuationId(){return this.valuationId}getContext(){let t={};return this.correlationId&&(t.correlationId=this.correlationId),this.valuationId&&(t.valuationId=this.valuationId),t}clear(){this.correlationId=null,this.valuationId=null}constructor(){this.correlationId=null,this.valuationId=null}}let s=new o,i=t=>{let e={context:t};return{debug:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.debug(r,t)},info:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.info(r,t)},warn:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.warn(r,t)},error:(t,n,r)=>{let o={...e,...s.getContext(),...n||{},...r?{error:{message:r.message,stack:r.stack,name:r.name}}:{}};a.error(o,t)}}};i("auth"),i("chat"),i("api"),i("store"),i("service");let l=i("general");i("data-extraction"),i("component"),i("step")},39479:function(t,e,n){n.d(e,{rg:function(){return r}});let r=()=>{let t=Date.now(),e=Math.random().toString(36).substr(2,9);return"val_".concat(t,"_").concat(e)}},33105:function(t,e,n){var r=n(16463),a=n(2265);e.default=()=>((0,r.usePathname)(),(0,r.useSearchParams)(),(0,a.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[]),null)},81046:function(t,e,n){n.d(e,{Cz:function(){return o},tM:function(){return s}});var r=n(50553);function a(t){let e=new Date().getFullYear();return t>=1900&&t<=e}function o(t){let e=t.toLowerCase();for(let[t,n]of Object.entries({[r.vu.B2B_SAAS]:["saas","software as a service","b2b","enterprise software","subscription software"],[r.vu.B2C]:["b2c","consumer","retail","direct to consumer","customer"],[r.vu.MARKETPLACE]:["marketplace","platform","two-sided","multi-sided"],[r.vu.ECOMMERCE]:["ecommerce","e-commerce","online store","online shop","digital store"],[r.vu.MANUFACTURING]:["manufacturing","production","factory","assembly"],[r.vu.SERVICES]:["services","consulting","professional services","service business"]}))if(n.some(t=>e.includes(t)))return t;return null}function s(t){let e=t.match(/\b(19|20)\d{2}\b/);if(e){let t=parseInt(e[0]);return a(t)?t:null}let n=t.match(/(?:founded|started|established)\s+(?:in\s+)?(\d{4})/i);if(n){let t=parseInt(n[1]);return a(t)?t:null}return null}},73589:function(t,e,n){n.d(e,{U:function(){return a}});var r=n(69419);class a{addMessage(t,e){let n={...e,id:this.generateMessageId(),timestamp:new Date};return r.pL.debug("Adding new message",{messageId:n.id,type:n.type,contentLength:n.content.length}),{updatedMessages:[...t,n],newMessage:n}}updateStreamingMessage(t,e,n,a,o){var s;let i=e||(null===(s=this.findStreamingMessage(t))||void 0===s?void 0:s.id);return i?(r.pL.debug("Updating streaming message",{messageId:i,contentLength:n.length,isComplete:a,hasMetadata:!!o,metadataKeys:o?Object.keys(o):[]}),t.map(t=>t.id===i?{...t,content:t.content+n,isComplete:a,isStreaming:!a,...o?{metadata:{...t.metadata,...o}}:{}}:t)):(r.pL.warn("No streaming message found to update"),t)}scrollToBottom(t){t.current?(t.current.scrollIntoView({behavior:"smooth"}),r.pL.debug("Scrolled to bottom of messages")):r.pL.warn("Messages end ref not available for scrolling")}generateMessageId(){return"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}findMessageById(t,e){return t.find(t=>t.id===e)}getLastMessage(t){return t.length>0?t[t.length-1]:void 0}getMessagesByType(t,e){return t.filter(t=>t.type===e)}getUserMessageCount(t){return this.getMessagesByType(t,"user").length}getAIMessageCount(t){return this.getMessagesByType(t,"ai").length}hasStreamingMessages(t){return t.some(t=>t.isStreaming)}getIncompleteMessages(t){return t.filter(t=>!t.isComplete)}findStreamingMessage(t){return t.find(t=>t.isStreaming)}clearAllMessages(){return r.pL.debug("Clearing all messages"),[]}removeMessage(t,e){let n=t.filter(t=>t.id!==e);return r.pL.debug("Removed message",{messageId:e,remainingCount:n.length}),n}}},92084:function(t,e,n){n.d(e,{Z:function(){return a}});class r{isEnabled(){return this.enabled}enable(){this.enabled=!0,localStorage.setItem("DEBUG_CONVERSATION","true"),console.log("\uD83D\uDD27 Debug logging enabled")}disable(){this.enabled=!1,localStorage.removeItem("DEBUG_CONVERSATION"),console.log("\uD83D\uDD07 Debug logging disabled")}log(t,e,n){this.enabled&&(n?console.log(t,e,n):console.log(t,e))}warn(t,e,n){this.enabled&&(n?console.warn(t,e,n):console.warn(t,e))}error(t,e,n){n?console.error(t,e,n):console.error(t,e)}info(t,e,n){this.enabled&&(n?console.info(t,e,n):console.info(t,e))}always(t,e,n){n?console.log(t,e,n):console.log(t,e)}constructor(){this.enabled=(void 0).DEV||"true"===localStorage.getItem("DEBUG_CONVERSATION")}}let a=new r;window.enableDebug=()=>a.enable(),window.disableDebug=()=>a.disable()},61172:function(t,e,n){n.d(e,{C:function(){return a}});var r=n(1581);n(69419);class a{static extractCSS(t){let e;let n=/<style(?:\s+[^>]*)?>([\s\S]*?)<\/style>/gi,r="",a=t;for(;null!==(e=n.exec(t));)r+=e[1]+"\n",a=a.replace(e[0],"");return{css:r.trim(),html:a}}static sanitize(t){let e;if(!t||"string"!=typeof t)return"";let n="",a=t,o=!1;try{let e=this.extractCSS(t);n=e.css,a=e.html,o=n.length>0}catch(e){a=t,o=!1}try{e=r.default.sanitize(a,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","div","span","strong","em","b","i","u","ul","ol","li","br","hr","table","thead","tbody","tr","th","td","a","img","blockquote","pre","code","section","article","header","footer","style"],ALLOWED_ATTR:["class","id","style","href","src","alt","title","colspan","rowspan","align","valign","type","media"],ALLOW_DATA_ATTR:!0,ALLOW_UNKNOWN_PROTOCOLS:!1,FORCE_BODY:!0,KEEP_CONTENT:!0})}catch(t){return""}return"string"!=typeof e?"":o&&n.length>0&&!(e.includes("<style>")||e.includes("<style "))?"<style>".concat(n,"</style>").concat(e):e}static process(t){if(!t)return"";let e=this.sanitize(t);return this.processLinks(e)}static processLinks(t){return t.replace(/<a\s+href=/g,'<a target="_blank" rel="noopener noreferrer" href=')}static extractSections(t){if(!t||"string"!=typeof t)return[];try{let e=new DOMParser().parseFromString(t,"text/html").querySelectorAll("h2, h3, h4");return Array.from(e).map((t,e)=>({id:"section-".concat(e),title:t.textContent||"",level:parseInt(t.tagName.charAt(1),10)||2}))}catch(t){return[]}}static isSafe(t){return!t||this.sanitize(t)===t}}},78703:function(t,e,n){n.d(e,{pU:function(){return o.default}}),(r=a||(a={})).NOT_FOUND="NOT_FOUND",r.NETWORK_ERROR="NETWORK_ERROR",r.TIMEOUT="TIMEOUT",r.RATE_LIMITED="RATE_LIMITED",r.SERVER_ERROR="SERVER_ERROR",r.INVALID_INPUT="INVALID_INPUT",r.UNSUPPORTED_COUNTRY="UNSUPPORTED_COUNTRY",r.UNKNOWN_ERROR="UNKNOWN_ERROR";var r,a,o=n(33105)},69419:function(t,e,n){n.d(e,{a:function(){return h},bn:function(){return d},eW:function(){return l},l2:function(){return i},pL:function(){return c},sK:function(){return g}});var r=n(78227);let a=n.n(r)()({level:"production"===(void 0).MODE?"info":"debug",browser:{asObject:!0},transport:"production"!==(void 0).MODE?{target:"pino-pretty",options:{colorize:!0,translateTime:"HH:MM:ss",ignore:"pid,hostname"}}:void 0});class o{setCorrelationId(t){this.correlationId=t}getCorrelationId(){return this.correlationId}setValuationId(t){this.valuationId=t}getValuationId(){return this.valuationId}getContext(){let t={};return this.correlationId&&(t.correlationId=this.correlationId),this.valuationId&&(t.valuationId=this.valuationId),t}clear(){this.correlationId=null,this.valuationId=null}constructor(){this.correlationId=null,this.valuationId=null}}let s=new o;function i(t){var e,n,r;return(null==t?void 0:null===(e=t.headers)||void 0===e?void 0:e["x-correlation-id"])?t.headers["x-correlation-id"]:(null==t?void 0:null===(n=t.headers)||void 0===n?void 0:n["X-Correlation-ID"])?t.headers["X-Correlation-ID"]:(null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.valuation_id)?t.data.valuation_id:(null==t?void 0:t.valuation_id)?t.valuation_id:null}function l(t){var e;let n=i(t);n&&s.setCorrelationId(n);let r=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.valuation_id)||(null==t?void 0:t.valuation_id);r&&s.setValuationId(r)}let u=t=>{let e={context:t};return{debug:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.debug(r,t)},info:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.info(r,t)},warn:(t,n)=>{let r={...e,...s.getContext(),...n||{}};a.warn(r,t)},error:(t,n,r)=>{let o={...e,...s.getContext(),...n||{},...r?{error:{message:r.message,stack:r.stack,name:r.name}}:{}};a.error(o,t)}}};u("auth");let c=u("chat"),d=u("api"),g=u("store");u("service");let h=u("general");u("data-extraction"),u("component"),u("step")},69302:function(t,e,n){n.d(e,{K:function(){return r}});class r{static getNextGuestReportNumber(){try{let t=localStorage.getItem(this.GUEST_REPORT_COUNT_KEY),e=(t?parseInt(t,10):0)+1;return localStorage.setItem(this.GUEST_REPORT_COUNT_KEY,e.toString()),e}catch(t){return console.warn("Failed to access localStorage for report count:",t),1}}static generateValuationName(t){if(!localStorage.getItem("upswitch_user_id")&&!localStorage.getItem("upswitch_auth_token")){let t=this.getNextGuestReportNumber();return"Valuation Report #".concat(t)}let e=0,n=t||Date.now().toString();for(let t=0;t<n.length;t++)e+=n.charCodeAt(t)*(t+1);let r=e%900+100;return"Valuation Report #".concat(r)}static generateFromCompany(t){if(!t)return this.generateValuationName();let e=t.trim().split(" ").slice(0,2).join(" ").substring(0,20),n=0;for(let e=0;e<t.length;e++)n+=t.charCodeAt(e)*(e+1);let r=n%900+100;return"".concat(e," Valuation #").concat(r)}static generateWithDate(t){let e=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],r=e.getDate();return t?"".concat(t," ").concat(n,"-").concat(r):"Valuation Report ".concat(n,"-").concat(r)}}r.GUEST_REPORT_COUNT_KEY="upswitch_guest_report_count"},13184:function(t,e,n){n.d(e,{qi:function(){return a},rg:function(){return r}});let r=()=>{let t=Date.now(),e=Math.random().toString(36).substr(2,9);return"val_".concat(t,"_").concat(e)},a=t=>/^val_\d+_[a-z0-9]+$/.test(t)}}]);