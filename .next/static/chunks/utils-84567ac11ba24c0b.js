"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[493],{3967:function(e,t,n){n.d(t,{pU:function(){return i}}),(r=a||(a={})).NOT_FOUND="NOT_FOUND",r.NETWORK_ERROR="NETWORK_ERROR",r.TIMEOUT="TIMEOUT",r.RATE_LIMITED="RATE_LIMITED",r.SERVER_ERROR="SERVER_ERROR",r.INVALID_INPUT="INVALID_INPUT",r.UNSUPPORTED_COUNTRY="UNSUPPORTED_COUNTRY",r.UNKNOWN_ERROR="UNKNOWN_ERROR";var r,a,o=n(39332),s=n(2784),i=()=>((0,o.usePathname)(),(0,o.useSearchParams)(),(0,s.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[]),null)},10877:function(e,t,n){n.d(t,{a:function(){return l}});var r=n(36559);let a=n.n(r)()({level:"production"===(void 0).MODE?"info":"debug",browser:{asObject:!0},transport:"production"!==(void 0).MODE?{target:"pino-pretty",options:{colorize:!0,translateTime:"HH:MM:ss",ignore:"pid,hostname"}}:void 0});class o{setCorrelationId(e){this.correlationId=e}getCorrelationId(){return this.correlationId}setValuationId(e){this.valuationId=e}getValuationId(){return this.valuationId}getContext(){let e={};return this.correlationId&&(e.correlationId=this.correlationId),this.valuationId&&(e.valuationId=this.valuationId),e}clear(){this.correlationId=null,this.valuationId=null}constructor(){this.correlationId=null,this.valuationId=null}}let s=new o,i=e=>{let t={context:e};return{debug:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.debug(r,e)},info:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.info(r,e)},warn:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.warn(r,e)},error:(e,n,r)=>{let o={...t,...s.getContext(),...n||{},...r?{error:{message:r.message,stack:r.stack,name:r.name}}:{}};a.error(o,e)}}};i("auth"),i("chat"),i("api"),i("store"),i("service");let l=i("general");i("data-extraction"),i("component"),i("step")},39479:function(e,t,n){n.d(t,{rg:function(){return r}});let r=()=>{let e=Date.now(),t=Math.random().toString(36).substr(2,9);return"val_".concat(e,"_").concat(t)}},33105:function(e,t,n){var r=n(16463),a=n(2265);t.default=()=>((0,r.usePathname)(),(0,r.useSearchParams)(),(0,a.useEffect)(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[]),null)},81046:function(e,t,n){n.d(t,{Cz:function(){return l},D$:function(){return a},Rz:function(){return i},e8:function(){return o},tM:function(){return u},wk:function(){return s}});var r=n(50553);function a(e){return({saas:r.vu.B2B_SAAS,software:r.vu.B2B_SAAS,b2b:r.vu.B2B_SAAS,consumer:r.vu.B2C,retail:r.vu.B2C,platform:r.vu.MARKETPLACE,ecommerce:r.vu.ECOMMERCE,"e-commerce":r.vu.ECOMMERCE,manufacturing:r.vu.MANUFACTURING,services:r.vu.SERVICES,consulting:r.vu.SERVICES,professional:r.vu.SERVICES})[e.toLowerCase()]||e}function o(e){return({technology:r.vu.B2B_SAAS,software:r.vu.B2B_SAAS,retail:r.vu.B2C,ecommerce:r.vu.ECOMMERCE,manufacturing:r.vu.MANUFACTURING,services:r.vu.SERVICES,healthcare:r.vu.SERVICES,finance:r.vu.SERVICES,real_estate:r.vu.SERVICES,hospitality:r.vu.SERVICES,construction:r.vu.SERVICES})[e.toLowerCase()]||r.vu.SERVICES}function s(e){return({"sole-trader":r.vu.SERVICES,company:r.vu.SERVICES,partnership:r.vu.SERVICES,llc:r.vu.SERVICES,corporation:r.vu.SERVICES})[e.toLowerCase()]||r.vu.SERVICES}function i(e){let t=new Date().getFullYear();return e>=1900&&e<=t}function l(e){let t=e.toLowerCase();for(let[e,n]of Object.entries({[r.vu.B2B_SAAS]:["saas","software as a service","b2b","enterprise software","subscription software"],[r.vu.B2C]:["b2c","consumer","retail","direct to consumer","customer"],[r.vu.MARKETPLACE]:["marketplace","platform","two-sided","multi-sided"],[r.vu.ECOMMERCE]:["ecommerce","e-commerce","online store","online shop","digital store"],[r.vu.MANUFACTURING]:["manufacturing","production","factory","assembly"],[r.vu.SERVICES]:["services","consulting","professional services","service business"]}))if(n.some(e=>t.includes(e)))return e;return null}function u(e){let t=e.match(/\b(19|20)\d{2}\b/);if(t){let e=parseInt(t[0]);return i(e)?e:null}let n=e.match(/(?:founded|started|established)\s+(?:in\s+)?(\d{4})/i);if(n){let e=parseInt(n[1]);return i(e)?e:null}return null}},73589:function(e,t,n){n.d(t,{U:function(){return a}});var r=n(69419);class a{addMessage(e,t){let n={...t,id:this.generateMessageId(),timestamp:new Date};return r.pL.debug("Adding new message",{messageId:n.id,type:n.type,contentLength:n.content.length}),{updatedMessages:[...e,n],newMessage:n}}updateStreamingMessage(e,t,n,a,o){var s;let i=t||(null===(s=this.findStreamingMessage(e))||void 0===s?void 0:s.id);return i?(r.pL.debug("Updating streaming message",{messageId:i,contentLength:n.length,isComplete:a,hasMetadata:!!o,metadataKeys:o?Object.keys(o):[]}),e.map(e=>e.id===i?{...e,content:e.content+n,isComplete:a,isStreaming:!a,...o?{metadata:{...e.metadata,...o}}:{}}:e)):(r.pL.warn("No streaming message found to update"),e)}scrollToBottom(e){e.current?(e.current.scrollIntoView({behavior:"smooth"}),r.pL.debug("Scrolled to bottom of messages")):r.pL.warn("Messages end ref not available for scrolling")}generateMessageId(){return"msg_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}findMessageById(e,t){return e.find(e=>e.id===t)}getLastMessage(e){return e.length>0?e[e.length-1]:void 0}getMessagesByType(e,t){return e.filter(e=>e.type===t)}getUserMessageCount(e){return this.getMessagesByType(e,"user").length}getAIMessageCount(e){return this.getMessagesByType(e,"ai").length}hasStreamingMessages(e){return e.some(e=>e.isStreaming)}getIncompleteMessages(e){return e.filter(e=>!e.isComplete)}findStreamingMessage(e){return e.find(e=>e.isStreaming)}clearAllMessages(){return r.pL.debug("Clearing all messages"),[]}removeMessage(e,t){let n=e.filter(e=>e.id!==t);return r.pL.debug("Removed message",{messageId:t,remainingCount:n.length}),n}}},45396:function(e,t,n){n.d(t,{a:function(){return r}});function r(e){let t={};return e.forEach(e=>{let n=e.fieldId,r=e.value;switch(n){case"revenue":case"ebitda":case"number_of_employees":case"founding_year":if("string"==typeof r){let e=parseFloat(r.replace(/[^\d.-]/g,""));r=isNaN(e)?r:e}break;case"country_code":case"industry":case"company_name":case"legal_form":r=String(r);break;case"has_historical_data":case"is_profitable":"string"==typeof r&&(r="true"===r.toLowerCase()||"yes"===r.toLowerCase())}(n in t||void 0!==r)&&(t[n]=r)}),t}},92084:function(e,t,n){n.d(t,{Z:function(){return a}});class r{isEnabled(){return this.enabled}enable(){this.enabled=!0,localStorage.setItem("DEBUG_CONVERSATION","true"),console.log("\uD83D\uDD27 Debug logging enabled")}disable(){this.enabled=!1,localStorage.removeItem("DEBUG_CONVERSATION"),console.log("\uD83D\uDD07 Debug logging disabled")}log(e,t,n){this.enabled&&(n?console.log(e,t,n):console.log(e,t))}warn(e,t,n){this.enabled&&(n?console.warn(e,t,n):console.warn(e,t))}error(e,t,n){n?console.error(e,t,n):console.error(e,t)}info(e,t,n){this.enabled&&(n?console.info(e,t,n):console.info(e,t))}always(e,t,n){n?console.log(e,t,n):console.log(e,t)}constructor(){this.enabled=(void 0).DEV||"true"===localStorage.getItem("DEBUG_CONVERSATION")}}let a=new r;window.enableDebug=()=>a.enable(),window.disableDebug=()=>a.disable()},61172:function(e,t,n){n.d(t,{C:function(){return a}});var r=n(1581);n(69419);class a{static extractCSS(e){let t;let n=/<style(?:\s+[^>]*)?>([\s\S]*?)<\/style>/gi,r="",a=e;for(;null!==(t=n.exec(e));)r+=t[1]+"\n",a=a.replace(t[0],"");return{css:r.trim(),html:a}}static sanitize(e){let t;if(!e||"string"!=typeof e)return"";let n="",a=e,o=!1;try{let t=this.extractCSS(e);n=t.css,a=t.html,o=n.length>0}catch(t){a=e,o=!1}try{t=r.default.sanitize(a,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","div","span","strong","em","b","i","u","ul","ol","li","br","hr","table","thead","tbody","tr","th","td","a","img","blockquote","pre","code","section","article","header","footer","style"],ALLOWED_ATTR:["class","id","style","href","src","alt","title","colspan","rowspan","align","valign","type","media"],ALLOW_DATA_ATTR:!0,ALLOW_UNKNOWN_PROTOCOLS:!1,FORCE_BODY:!0,KEEP_CONTENT:!0})}catch(e){return""}return"string"!=typeof t?"":o&&n.length>0&&!(t.includes("<style>")||t.includes("<style "))?"<style>".concat(n,"</style>").concat(t):t}static process(e){if(!e)return"";let t=this.sanitize(e);return this.processLinks(t)}static processLinks(e){return e.replace(/<a\s+href=/g,'<a target="_blank" rel="noopener noreferrer" href=')}static extractSections(e){if(!e||"string"!=typeof e)return[];try{let t=new DOMParser().parseFromString(e,"text/html").querySelectorAll("h2, h3, h4");return Array.from(t).map((e,t)=>({id:"section-".concat(t),title:e.textContent||"",level:parseInt(e.tagName.charAt(1),10)||2}))}catch(e){return[]}}static isSafe(e){return!e||this.sanitize(e)===e}}},78703:function(e,t,n){n.d(t,{pU:function(){return o.default}}),(r=a||(a={})).NOT_FOUND="NOT_FOUND",r.NETWORK_ERROR="NETWORK_ERROR",r.TIMEOUT="TIMEOUT",r.RATE_LIMITED="RATE_LIMITED",r.SERVER_ERROR="SERVER_ERROR",r.INVALID_INPUT="INVALID_INPUT",r.UNSUPPORTED_COUNTRY="UNSUPPORTED_COUNTRY",r.UNKNOWN_ERROR="UNKNOWN_ERROR";var r,a,o=n(33105)},69419:function(e,t,n){n.d(t,{Sc:function(){return E},a:function(){return h},bn:function(){return d},eW:function(){return l},l2:function(){return i},pL:function(){return c},qA:function(){return f},sK:function(){return g}});var r=n(78227);let a=n.n(r)()({level:"production"===(void 0).MODE?"info":"debug",browser:{asObject:!0},transport:"production"!==(void 0).MODE?{target:"pino-pretty",options:{colorize:!0,translateTime:"HH:MM:ss",ignore:"pid,hostname"}}:void 0});class o{setCorrelationId(e){this.correlationId=e}getCorrelationId(){return this.correlationId}setValuationId(e){this.valuationId=e}getValuationId(){return this.valuationId}getContext(){let e={};return this.correlationId&&(e.correlationId=this.correlationId),this.valuationId&&(e.valuationId=this.valuationId),e}clear(){this.correlationId=null,this.valuationId=null}constructor(){this.correlationId=null,this.valuationId=null}}let s=new o;function i(e){var t,n,r;return(null==e?void 0:null===(t=e.headers)||void 0===t?void 0:t["x-correlation-id"])?e.headers["x-correlation-id"]:(null==e?void 0:null===(n=e.headers)||void 0===n?void 0:n["X-Correlation-ID"])?e.headers["X-Correlation-ID"]:(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.valuation_id)?e.data.valuation_id:(null==e?void 0:e.valuation_id)?e.valuation_id:null}function l(e){var t;let n=i(e);n&&s.setCorrelationId(n);let r=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.valuation_id)||(null==e?void 0:e.valuation_id);r&&s.setValuationId(r)}let u=e=>{let t={context:e};return{debug:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.debug(r,e)},info:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.info(r,e)},warn:(e,n)=>{let r={...t,...s.getContext(),...n||{}};a.warn(r,e)},error:(e,n,r)=>{let o={...t,...s.getContext(),...n||{},...r?{error:{message:r.message,stack:r.stack,name:r.name}}:{}};a.error(o,e)}}};u("auth");let c=u("chat"),d=u("api"),g=u("store"),f=u("service"),h=u("general");u("data-extraction");let E=u("component");u("step")},69302:function(e,t,n){n.d(t,{K:function(){return r}});class r{static getNextGuestReportNumber(){try{let e=localStorage.getItem(this.GUEST_REPORT_COUNT_KEY),t=(e?parseInt(e,10):0)+1;return localStorage.setItem(this.GUEST_REPORT_COUNT_KEY,t.toString()),t}catch(e){return console.warn("Failed to access localStorage for report count:",e),1}}static generateValuationName(e){if(!localStorage.getItem("upswitch_user_id")&&!localStorage.getItem("upswitch_auth_token")){let e=this.getNextGuestReportNumber();return"Valuation Report #".concat(e)}let t=0,n=e||Date.now().toString();for(let e=0;e<n.length;e++)t+=n.charCodeAt(e)*(e+1);let r=t%900+100;return"Valuation Report #".concat(r)}static generateFromCompany(e){if(!e)return this.generateValuationName();let t=e.trim().split(" ").slice(0,2).join(" ").substring(0,20),n=0;for(let t=0;t<e.length;t++)n+=e.charCodeAt(t)*(t+1);let r=n%900+100;return"".concat(t," Valuation #").concat(r)}static generateWithDate(e){let t=new Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate();return e?"".concat(e," ").concat(n,"-").concat(r):"Valuation Report ".concat(n,"-").concat(r)}}r.GUEST_REPORT_COUNT_KEY="upswitch_guest_report_count"},13184:function(e,t,n){n.d(t,{qi:function(){return a},rg:function(){return r}});let r=()=>{let e=Date.now(),t=Math.random().toString(36).substr(2,9);return"val_".concat(e,"_").concat(t)},a=e=>/^val_\d+_[a-z0-9]+$/.test(e)}}]);