"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{68954:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},92940:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7746:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},22023:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},39451:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},33907:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},36127:function(e,t,a){a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(78030).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},55513:function(e,t,a){a.d(t,{x:function(){return z}});var r=a(57437),s=a(3274),n=a(39451),l=a(78030);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,l.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),o=(0,l.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var c=a(7746),d=a(30690);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,l.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),m=(0,l.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),p=(0,l.Z)("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);var h=a(2265),x=a(30761),v=a(65030),f=a(69419);class g{static getNextGuestReportNumber(){try{let e=localStorage.getItem(this.GUEST_REPORT_COUNT_KEY),t=(e?parseInt(e,10):0)+1;return localStorage.setItem(this.GUEST_REPORT_COUNT_KEY,t.toString()),t}catch(e){return console.warn("Failed to access localStorage for report count:",e),1}}static generateValuationName(e){if(!localStorage.getItem("upswitch_user_id")&&!localStorage.getItem("upswitch_auth_token")){let e=this.getNextGuestReportNumber();return"Valuation Report #".concat(e)}let t=0,a=e||Date.now().toString();for(let e=0;e<a.length;e++)t+=a.charCodeAt(e)*(e+1);let r=t%900+100;return"Valuation Report #".concat(r)}static generateFromCompany(e){if(!e)return this.generateValuationName();let t=e.trim().split(" ").slice(0,2).join(" ").substring(0,20),a=0;for(let t=0;t<e.length;t++)a+=e.charCodeAt(t)*(t+1);let r=a%900+100;return"".concat(t," Valuation #").concat(r)}static generateWithDate(e){let t=new Date,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getDate();return e?"".concat(e," ").concat(a,"-").concat(r):"Valuation Report ".concat(a,"-").concat(r)}}g.GUEST_REPORT_COUNT_KEY="upswitch_guest_report_count";var b=a(36127),y=a(54887);let j=e=>{let{isOpen:t,onClose:a,onConfirm:s,targetFlow:n,currentFlow:l}=e;if(!t)return null;let i={manual:"Manual Entry",conversational:"AI-Guided"},o="conversational"===n?"Conversational":"Manual",c=l?i[l]:null,d=(0,r.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/65",onClick:a,"aria-hidden":"false"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4","aria-hidden":"false","aria-modal":"true",role:"dialog",children:(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-2xl shadow-2xl border border-zinc-700 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-zinc-700",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center",children:(0,r.jsx)(b.Z,{className:"w-5 h-5 text-primary-500"})}),(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["Switch to ",o," Flow?"]})]})}),(0,r.jsxs)("div",{className:"px-6 py-5 space-y-3",children:[(0,r.jsx)("p",{className:"text-zinc-300 leading-relaxed",children:c?(0,r.jsxs)(r.Fragment,{children:["Switch from ",(0,r.jsx)("span",{className:"font-semibold text-white",children:c})," to"," ",(0,r.jsx)("span",{className:"font-semibold text-white",children:i[n]}),"?"]}):(0,r.jsxs)(r.Fragment,{children:["Switch to the ",o.toLowerCase()," flow?"]})}),(0,r.jsx)("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Your entered data will be preserved. You can switch between flows at any time without losing your progress."})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-zinc-900/50 rounded-b-2xl flex items-center justify-end gap-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-zinc-300 hover:text-white transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-medium bg-accent-600 hover:bg-accent-500 text-white rounded-lg transition-colors",children:"Switch Flow"})]})]})})]});return"undefined"!=typeof document&&document.body?(0,y.createPortal)(d,document.body):d};var N=a(6427);let w=e=>{let{content:t,children:a,position:s="top",delay:n=300,className:l="cursor-help border-b border-dotted border-gray-400"}=e,[i,o]=(0,h.useState)(!1),[c,d]=(0,h.useState)(!1),[u,m]=(0,h.useState)(null),p=(0,h.useRef)(null),x=(0,h.useRef)(null);return(0,h.useEffect)(()=>{d("ontouchstart"in window)},[]),(0,h.useEffect)(()=>{if(!c||!i)return;let e=e=>{p.current&&!p.current.contains(e.target)&&x.current&&!x.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[c,i]),(0,h.useEffect)(()=>()=>{u&&clearTimeout(u)},[u]),(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)("div",{ref:x,role:"tooltip","aria-label":t,onClick:e=>{c&&(e.preventDefault(),e.stopPropagation(),o(!i))},onMouseEnter:c?void 0:()=>{c||m(setTimeout(()=>o(!0),n))},onMouseLeave:c?void 0:()=>{u&&(clearTimeout(u),m(null)),o(!1)},onFocus:()=>o(!0),onBlur:()=>o(!1),tabIndex:0,className:l,children:a}),i&&(0,r.jsxs)("div",{ref:p,className:"absolute z-50 px-3 py-2 text-sm text-white bg-gray-900 \n            rounded-lg shadow-lg whitespace-nowrap transition-opacity duration-200\n            ".concat("top"===s?"bottom-full mb-2 left-1/2 -translate-x-1/2":"","\n            ").concat("bottom"===s?"top-full mt-2 left-1/2 -translate-x-1/2":"","\n          "),children:[t,(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-gray-900 rotate-45\n            ".concat("top"===s?"bottom-[-4px] left-1/2 -translate-x-1/2":"","\n            ").concat("bottom"===s?"top-[-4px] left-1/2 -translate-x-1/2":"","\n          ")})]})]})},z=e=>{let{onRefresh:t,onDownload:a,onFullScreen:l,isGenerating:b=!1,user:y,valuationName:z="Valuation test123",activeTab:k="preview",onTabChange:C,companyName:_}=e,{refreshAuth:M}=(0,x.a)(),{session:S,switchView:F,pendingFlowSwitch:E,setPendingFlowSwitch:L,isSyncing:D}=(0,v.L)(),[Z,T]=(0,h.useState)(!1);(0,h.useEffect)(()=>{E?T(!0):T(!1)},[E]);let q=async e=>{if(!S||S.currentView===e)return;let t=await F(e,!1,!1);(null==t?void 0:t.needsConfirmation)&&T(!0)},I=async()=>{E&&(await F(E,!1,!0),T(!1),L(null))},[V,A]=(0,h.useState)(!1),[R,P]=(0,h.useState)(z),[B,O]=(0,h.useState)(()=>_?g.generateFromCompany(_):g.generateValuationName()),U=(0,h.useRef)(null);(0,h.useEffect)(()=>{V&&U.current&&(U.current.focus(),U.current.select())},[V]),(0,h.useEffect)(()=>{V||P(B)},[B,V]);let H=()=>{A(!0)},K=async()=>{if(!R.trim()){P(z),A(!1);return}O(R.trim()),A(!1);try{f.a.info("Valuation name saved",{name:R.trim()})}catch(e){f.a.error("Failed to save valuation name",{error:e})}},W=()=>{P(z),A(!1)},G=e=>{null==C||C(e)},Y=async()=>{try{f.a.info("Logging out user");let e=(void 0).VITE_BACKEND_URL||(void 0).VITE_API_BASE_URL||"https://web-production-8d00b.up.railway.app",t=await fetch("".concat(e,"/api/auth/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});t.ok?f.a.info("Logout successful"):f.a.warn("Logout request failed",{status:t.status}),await M()}catch(e){f.a.error("Logout failed",{error:e}),await M()}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"relative min-h-12 w-full shrink-0 flex items-center gap-2 px-4 py-2 border-b border-zinc-800/50 bg-zinc-950/50 backdrop-blur-sm overflow-visible",children:(0,r.jsx)("div",{className:"relative max-w-full gap-1 flex w-full shrink-0 items-center",children:(0,r.jsx)("div",{className:"w-full overflow-visible whitespace-nowrap scrollbar-hide",children:(0,r.jsxs)("div",{className:"relative flex w-full flex-shrink-0 items-center justify-between",children:[(0,r.jsx)("div",{className:"flex flex-shrink-0 items-center gap-2",style:{width:"23%"},children:(0,r.jsxs)("div",{className:"relative flex items-center gap-2 group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-white",children:[b?(0,r.jsx)(s.Z,{className:"w-4 h-4 animate-spin text-white"}):(0,r.jsx)("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-harvest-500 to-harvest-600 animate-pulse shadow-[0_0_8px_rgba(217,165,88,0.5)]"}),V?(0,r.jsx)("input",{ref:U,type:"text",value:R,onChange:e=>P(e.target.value),onBlur:K,onKeyDown:e=>{"Enter"===e.key?K():"Escape"===e.key&&W()},className:"bg-transparent border-none outline-none focus:outline-none focus:ring-0 focus:border-none text-transparent bg-clip-text bg-gradient-to-r from-harvest-400 to-harvest-500 font-semibold text-sm",style:{minWidth:"120px"}}):(0,r.jsx)("button",{onClick:H,className:"hidden md:block font-semibold text-transparent bg-clip-text bg-gradient-to-r from-harvest-400 to-harvest-500 hover:from-harvest-300 hover:to-harvest-400 transition-all duration-200 cursor-pointer hover:scale-105 drop-shadow-[0_1px_3px_rgba(217,165,88,0.4)]",title:"Click to edit valuation name",children:B}),(0,r.jsx)("button",{onClick:H,className:"md:hidden text-xs text-harvest-400 font-bold hover:text-harvest-300 transition-colors cursor-pointer",title:"Click to edit valuation name",children:"Valuation"})]}),(0,r.jsx)("div",{className:"hidden md:block text-xs text-zinc-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"✏️"})]})}),(0,r.jsxs)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-1",children:[(0,r.jsx)(w,{content:"Manual Input",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:()=>q("manual"),disabled:(null==S?void 0:S.currentView)==="manual"||D,className:"p-2 rounded-lg transition-all duration-200 ".concat((null==S?void 0:S.currentView)==="manual"?"bg-zinc-700 text-white":"text-gray-400 hover:text-gray-300 hover:bg-zinc-800"," ").concat(D?"opacity-50 cursor-not-allowed":""),children:D&&(null==S?void 0:S.currentView)!=="manual"?(0,r.jsx)(s.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(n.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(w,{content:"Conversational Mode",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:()=>q("conversational"),disabled:(null==S?void 0:S.currentView)==="conversational"||D,className:"p-2 rounded-lg transition-all duration-200 ".concat((null==S?void 0:S.currentView)==="conversational"?"bg-zinc-700 text-white":"text-gray-400 hover:text-gray-300 hover:bg-zinc-800"," ").concat(D?"opacity-50 cursor-not-allowed":""),children:D&&(null==S?void 0:S.currentView)!=="conversational"?(0,r.jsx)(s.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(i,{className:"w-4 h-4"})})}),(0,r.jsx)("div",{className:"mx-2 h-6 w-px bg-zinc-700"}),(0,r.jsx)(w,{content:"Preview",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:()=>G("preview"),className:"p-2 rounded-lg transition-all duration-200 ".concat("preview"===k?"bg-zinc-700 text-white":"text-gray-400 hover:text-gray-300 hover:bg-zinc-800"),children:(0,r.jsx)(o,{className:"w-4 h-4"})})}),(0,r.jsx)(w,{content:"Source Code",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:()=>G("source"),className:"p-2 rounded-lg transition-all duration-200 ".concat("source"===k?"bg-zinc-700 text-white":"text-gray-400 hover:text-gray-300 hover:bg-zinc-800"),children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(w,{content:"Valuation Info",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:()=>G("info"),className:"p-2 rounded-lg transition-all duration-200 ".concat("info"===k?"bg-zinc-700 text-white":"text-gray-400 hover:text-gray-300 hover:bg-zinc-800"),children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})})}),(0,r.jsx)("div",{className:"mx-2 h-6 w-px bg-zinc-700"}),(0,r.jsx)(w,{content:"Refresh",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-all duration-200 text-gray-400 hover:text-gray-300 hover:bg-zinc-800",disabled:b,children:(0,r.jsx)(u,{className:"w-4 h-4"})})}),(0,r.jsx)(w,{content:"Download PDF",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:a,className:"p-2 rounded-lg transition-all duration-200 text-gray-400 hover:text-gray-300 hover:bg-zinc-800",children:(0,r.jsx)(m,{className:"w-4 h-4"})})}),(0,r.jsx)(w,{content:"Open Full Screen",position:"bottom",className:"",children:(0,r.jsx)("button",{onClick:l,className:"p-2 rounded-lg transition-all duration-200 text-gray-400 hover:text-gray-300 hover:bg-zinc-800",children:(0,r.jsx)(p,{className:"w-4 h-4"})})})]}),(0,r.jsx)("div",{className:"flex items-center gap-1.5",children:(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)(N.w,{user:y,onLogout:Y})})})]})})})}),(0,r.jsx)(j,{isOpen:Z,currentFlow:(null==S?void 0:S.currentView)||"manual",targetFlow:E||"manual",onConfirm:I,onClose:()=>{T(!1),L(null)}})]})}},44134:function(e,t,a){a.d(t,{hK:function(){return C}});let r={company_name:{id:"company_name",label:"Company Name",description:"The legal name of your business",type:"text",required:!0,validation:[{type:"required",message:"Company name is required",severity:"error"},{type:"custom",value:e=>e.length>=2&&e.length<=100,message:"Company name must be between 2 and 100 characters",severity:"error"}],placeholder:"Enter your company name",suggestions:["TechCorp Inc.","Green Energy Solutions","Consulting Partners","Manufacturing Ltd"],priority:1,collectionMethods:["manual_form","conversational","suggestion"]},country_code:{id:"country_code",label:"Country",description:"Where is your business headquartered?",type:"select",required:!0,options:[{value:"BE",label:"Belgium"},{value:"NL",label:"Netherlands"},{value:"DE",label:"Germany"},{value:"FR",label:"France"},{value:"US",label:"United States"},{value:"GB",label:"United Kingdom"}],priority:2,collectionMethods:["manual_form","conversational","suggestion"]},industry:{id:"industry",label:"Industry",description:"What industry does your business operate in?",type:"select",required:!0,options:[{value:"technology",label:"Technology"},{value:"manufacturing",label:"Manufacturing"},{value:"retail",label:"Retail"},{value:"services",label:"Services"},{value:"healthcare",label:"Healthcare"},{value:"finance",label:"Finance"}],priority:3,collectionMethods:["manual_form","conversational","fuzzy_search","suggestion"]},business_model:{id:"business_model",label:"Business Model",description:"How does your business generate revenue?",type:"select",required:!0,dependsOn:["industry"],options:[{value:"b2b_saas",label:"B2B SaaS"},{value:"b2c",label:"B2C"},{value:"marketplace",label:"Marketplace"},{value:"ecommerce",label:"E-commerce"},{value:"manufacturing",label:"Manufacturing"},{value:"services",label:"Services"}],priority:4,collectionMethods:["manual_form","conversational","suggestion"]},founding_year:{id:"founding_year",label:"Founding Year",description:"When was your business founded?",type:"number",required:!0,validation:[{type:"min",value:1900,message:"Founding year must be after 1900",severity:"error"},{type:"max",value:new Date().getFullYear(),message:"Founding year cannot be in the future",severity:"error"}],placeholder:"e.g., 2020",priority:5,collectionMethods:["manual_form","conversational"]},current_year_data:{id:"current_year_data",label:"Current Year Financials",group:"financial",type:"currency",required:!0,priority:6,collectionMethods:["manual_form","conversational"]},revenue:{id:"revenue",label:"Annual Revenue",description:"Total revenue for the most recent complete year",group:"financial",type:"currency",required:!1,validation:[{type:"min",value:0,message:"Revenue cannot be negative",severity:"error"},{type:"max",value:1e9,message:"Please contact us for valuations over €1B",severity:"warning"}],placeholder:"€500,000",suggestions:["Under €100K","€100K - €500K","€500K - €1M","€1M - €5M","Over €5M"],priority:7,collectionMethods:["manual_form","conversational","suggestion"]},ebitda:{id:"ebitda",label:"EBITDA",description:"Earnings Before Interest, Taxes, Depreciation, and Amortization",group:"financial",type:"currency",required:!1,placeholder:"€150,000",priority:8,collectionMethods:["manual_form","conversational"]},number_of_employees:{id:"number_of_employees",label:"Number of Employees",description:"Total full-time equivalent employees",type:"number",required:!1,validation:[{type:"min",value:0,message:"Employee count cannot be negative",severity:"error"},{type:"max",value:1e4,message:"For companies with 10,000+ employees, please contact us",severity:"warning"}],placeholder:"25",suggestions:["1-5","6-20","21-50","51-100","100+"],priority:9,collectionMethods:["manual_form","conversational","suggestion"]}};var s=a(57437),n=a(2265),l=a(68954),i=a(78030);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=e=>{var t;let{field:a,value:r,onChange:i,errors:c=[],context:u,disabled:m=!1}=e,[p,h]=(0,n.useState)(!1),x=c.length>0,v=e=>{i(e,"conversational")},f=function(e){switch(e.id){case"company_name":return"What's the name of your business?";case"revenue":return"What's your annual revenue for the most recent year?";case"ebitda":return"What's your EBITDA (Earnings Before Interest, Taxes, Depreciation, and Amortization)?";case"number_of_employees":return"How many employees does your business have?";case"industry":return"What industry is your business in?";case"country_code":return"Where is your business headquartered?";default:return"What's your ".concat(e.label.toLowerCase(),"?")}}(a),g=function(e){switch(e.id){case"company_name":return["TechCorp Inc.","Green Energy Solutions"];case"revenue":return["€500,000","\xa32.3 million","$1.2M"];case"number_of_employees":return["25","5-10 team"];default:return[]}}(a),b=a.suggestions||[];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white",children:"Valuation Assistant"}),(0,s.jsxs)("p",{className:"text-xs text-zinc-400",children:["Asking for ",a.label.toLowerCase()]})]}),a.description&&(0,s.jsx)("button",{onClick:()=>h(!p),className:"text-zinc-400 hover:text-zinc-300",children:(0,s.jsx)(o,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"bg-zinc-800/50 rounded-lg p-4 border border-zinc-700/50",children:[(0,s.jsx)("p",{className:"text-white text-sm leading-relaxed",children:f}),p&&a.description&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-zinc-600/50",children:(0,s.jsxs)("p",{className:"text-xs text-zinc-400",children:["\uD83D\uDCA1 ",a.description]})}),g.length>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-xs text-zinc-500 mb-2",children:"Examples:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:g.slice(0,3).map((e,t)=>(0,s.jsx)("button",{onClick:()=>v(d(e,a)),disabled:m,className:"px-2 py-1 bg-zinc-700/50 hover:bg-zinc-600/50 text-xs text-zinc-300 rounded border border-zinc-600/50 hover:border-zinc-500/50 transition-colors",children:e},t))})]})]}),b.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:"Quick suggestions:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map((e,t)=>(0,s.jsx)("button",{onClick:()=>v(d(e,a)),disabled:m,className:"px-3 py-2 bg-primary-600/20 hover:bg-primary-600/30 text-sm text-primary-300 rounded-lg border border-primary-600/30 hover:border-primary-600/50 transition-colors",children:e},t))})]}),x&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm text-red-400",children:null===(t=c.find(e=>"error"===e.severity))||void 0===t?void 0:t.message})})]})};function d(e,t){switch(t.type){case"currency":{let t;let a=e.replace(/[€£$]/g,"").replace(/,/g,"").trim();if(a.includes("million")||a.includes("M")){let r=parseFloat(a.replace(/million|M/g,""));if(isNaN(r))return e;t=1e6*r}else if(a.includes("K")){let r=parseFloat(a.replace("K",""));if(isNaN(r))return e;t=1e3*r}else if(isNaN(t=parseFloat(a)))return e;return t}case"number":{if(e.includes("-")){let t=e.split("-").map(e=>parseInt(e.trim(),10));if(t.some(isNaN))return e;let[a,r]=t;return Math.round((a+r)/2)}let t=parseInt(e,10);return isNaN(t)?e:t}case"boolean":{let t=e.toLowerCase().trim();if("yes"===t||"true"===t||"1"===t)return!0;if("no"===t||"false"===t||"0"===t)return!1;return e}default:return e}}/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,i.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var m=a(22023),p=a(92940);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,i.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=e=>{var t;let{field:a,value:r,onChange:l,errors:i=[],disabled:o=!1}=e,[c,d]=(0,n.useState)(!1),[x,v]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(null),j=(0,n.useRef)(null);i.length;let N=null===(t=i.find(e=>"error"===e.severity))||void 0===t?void 0:t.message,w=function(e){switch(e.type){case"currency":case"number":return[".xlsx",".xls",".csv",".pdf"];case"text":case"textarea":return[".pdf",".docx",".doc",".txt"];default:return[".pdf",".xlsx",".xls",".csv"]}}(a),z=e=>{var t;let a=[];e.size>10485760&&a.push("File size must be less than 10MB");let r="."+(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase());return w.includes(r)||a.push("File type not supported. Supported formats: ".concat(w.join(", "))),{valid:0===a.length,errors:a}},k=async e=>{g(!0),y(null);try{await new Promise(e=>setTimeout(e,2e3));let t="revenue"===a.id?5e5:"ebitda"===a.id?15e4:"number_of_employees"===a.id?25:"Extracted from ".concat(e.name);l(t,"file_upload"),y(null)}catch(e){y(e instanceof Error?e.message:"File processing failed")}finally{g(!1)}},C=async e=>{let t=z(e);if(!t.valid){y(t.errors.join(", "));return}v(e),y(null),await k(e)},_=()=>{v(null),y(null),l(void 0,"file_upload"),j.current&&(j.current.value="")};return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u,{className:"w-4 h-4 text-primary-400"}),(0,s.jsxs)("label",{className:"text-sm font-medium text-white",children:[a.label,a.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]})]}),a.description&&(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:a.description}),!x&&(0,s.jsxs)("div",{onDrop:e=>{e.preventDefault(),d(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&C(t[0])},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:()=>{d(!1)},className:"\n            relative border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer\n            ".concat(c?"border-primary-400 bg-primary-600/10":"border-zinc-600 hover:border-zinc-500","\n            ").concat(o?"opacity-50 cursor-not-allowed":"","\n          "),onClick:()=>{var e;return!o&&(null===(e=j.current)||void 0===e?void 0:e.click())},children:[(0,s.jsx)("input",{ref:j,type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&C(t[0])},accept:w.join(","),disabled:o,className:"hidden"}),(0,s.jsx)(m.Z,{className:"w-8 h-8 text-zinc-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-zinc-300 mb-1",children:"Drop your file here or click to browse"}),(0,s.jsxs)("p",{className:"text-xs text-zinc-500",children:["Supported formats: ",w.join(", ")," (max"," ",Math.round(10),"MB)"]})]}),x&&f&&(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-zinc-800/50 rounded-lg border border-zinc-600/50",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-500"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-white",children:["Processing ",x.name,"..."]}),(0,s.jsxs)("p",{className:"text-xs text-zinc-400",children:["Extracting ",a.label.toLowerCase()," from document"]})]})]}),x&&!f&&!b&&void 0!==r&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-900/20 rounded-lg border border-green-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-green-400"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-white",children:["Successfully processed ",x.name]}),(0,s.jsxs)("p",{className:"text-xs text-zinc-400",children:["Extracted: ",(0,s.jsx)("span",{className:"text-green-300",children:"number"==typeof r?"currency"===a.type?new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(r):r.toLocaleString():String(r)})]})]})]}),(0,s.jsx)("button",{onClick:_,className:"text-zinc-400 hover:text-zinc-300 text-sm",disabled:o,children:"Remove"})]}),b&&(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-red-900/20 rounded-lg border border-red-700/50",children:[(0,s.jsx)(h,{className:"w-5 h-5 text-red-400"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-red-400",children:"Processing failed"}),(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:b})]}),(0,s.jsx)("button",{onClick:_,className:"text-zinc-400 hover:text-zinc-300 text-sm",disabled:o,children:"Try again"})]}),a.id&&(0,s.jsxs)("div",{className:"bg-zinc-800/30 rounded-lg p-3 border border-zinc-700/30",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-zinc-300 mb-2",children:"\uD83D\uDCA1 What to look for in your file:"}),(0,s.jsx)("ul",{className:"text-xs text-zinc-400 space-y-1",children:(function(e){switch(e.id){case"revenue":return['Look for "Revenue", "Sales", "Turnover" in financial statements',"Check income statements or P&L sections","Annual figures are preferred over monthly"];case"ebitda":return['Look for "EBITDA", "Operating Profit", "Earnings Before Interest..."',"Check income statements","Exclude extraordinary items if possible"];case"number_of_employees":return['Look for "Number of Employees", "Headcount", "Staff Count"',"Check company overview or HR sections","Full-time equivalents (FTE) preferred"];default:return['Look for "'.concat(e.label,'" in the document'),"Check tables, headers, and key sections","Use the most recent or relevant figures"]}})(a).map((e,t)=>(0,s.jsxs)("li",{children:["• ",e]},t))})]}),N&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:N})]})},v=(0,i.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f=(0,i.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),g=e=>{var t;let{field:a,value:r,onChange:l,errors:i=[],disabled:o=!1}=e,[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1);i.length;let p=null===(t=i.find(e=>"error"===e.severity))||void 0===t?void 0:t.message,h=(0,n.useMemo)(()=>{if(!c.trim()||!a.options)return[];let e=c.toLowerCase(),t=[];for(let r of a.options){let a=r.label.toLowerCase(),s=r.value.toLowerCase(),n=0;if(a===e||s===e)n=100;else if(a.startsWith(e)||s.startsWith(e))n=80;else if(a.includes(e)||s.includes(e))n=60;else{let t=e.split(""),r=0;for(let e of t)(a.includes(e)||s.includes(e))&&r++;n=r/t.length*40}n>20&&t.push({option:r,score:n})}return t.sort((e,t)=>t.score-e.score).slice(0,8)},[c,a.options]),x=e=>{l(e,"fuzzy_search"),d(""),m(!1)};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white",children:[a.label,a.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),a.description&&(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:a.description}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-zinc-400"}),(0,s.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),m(!0)},onFocus:()=>m(!0),placeholder:"Search ".concat(a.label.toLowerCase(),"..."),disabled:o,className:"w-full pl-10 pr-4 py-2 bg-zinc-800 border border-zinc-600 rounded-lg text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r&&(0,s.jsxs)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-xs text-zinc-400 bg-zinc-700 px-2 py-1 rounded",children:(()=>{if(!r||!a.options)return"";let e=a.options.find(e=>e.value===r);return e?e.label:r})()}),(0,s.jsx)(f,{className:"w-4 h-4 text-green-400"})]})]}),u&&c.trim()&&h.length>0&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 border border-zinc-600 rounded-lg shadow-lg max-h-64 overflow-y-auto",children:h.map(e=>{let{option:t}=e;return(0,s.jsx)("button",{onClick:()=>x(t.value),disabled:o,className:"w-full px-4 py-3 text-left hover:bg-zinc-700 focus:bg-zinc-700 focus:outline-none transition-colors border-b border-zinc-700/50 last:border-b-0",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:t.label}),t.description&&(0,s.jsx)("div",{className:"text-xs text-zinc-400 mt-1",children:t.description})]}),r===t.value&&(0,s.jsx)(f,{className:"w-4 h-4 text-primary-400"})]})},t.value)})}),u&&c.trim()&&0===h.length&&(0,s.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-zinc-800 border border-zinc-600 rounded-lg shadow-lg p-4 text-center",children:[(0,s.jsxs)("p",{className:"text-zinc-400 text-sm",children:['No matches found for "',c,'"']}),(0,s.jsxs)("button",{onClick:()=>x(c),className:"mt-2 px-3 py-1 bg-primary-600 text-white text-xs rounded hover:bg-primary-700 transition-colors",children:['Use "',c,'" anyway']})]})]}),!c.trim()&&a.options&&a.options.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:"Popular options:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.options.slice(0,6).map(e=>(0,s.jsx)("button",{onClick:()=>x(e.value),disabled:o,className:"px-3 py-1 bg-zinc-800/50 hover:bg-zinc-700/50 text-sm text-zinc-300 rounded-lg border border-zinc-600/50 hover:border-zinc-500/50 transition-colors",children:e.label},e.value))})]}),p&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:p})]})},b=e=>{var t;let{field:a,value:r,onChange:n,errors:l=[],disabled:i=!1,autoFocus:o=!1}=e,c=l.length>0,d=null===(t=l.find(e=>"error"===e.severity))||void 0===t?void 0:t.message;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white",children:[a.label,a.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),a.description&&(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:a.description}),(0,s.jsx)(y,{field:a,value:null!=r?r:"",onChange:e=>{n(e,"manual_form")},disabled:i,autoFocus:o,hasErrors:c}),d&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:d})]})},y=e=>{var t,a,r,n,l;let{field:i,value:o,onChange:c,disabled:d=!1,autoFocus:u=!1,hasErrors:m=!1}=e,p="\n    w-full px-3 py-2 bg-zinc-800 border rounded-lg text-white placeholder-zinc-400\n    focus:outline-none focus:ring-2 focus:ring-primary-500\n    ".concat(m?"border-red-500":"border-zinc-600","\n    ").concat(d?"opacity-50 cursor-not-allowed":"","\n  ");switch(i.type){case"text":case"textarea":{let e="string"==typeof o?o:String(o||"");if("textarea"===i.type)return(0,s.jsx)("textarea",{value:e,onChange:e=>c(e.target.value),placeholder:i.placeholder,disabled:d,autoFocus:u,rows:4,className:p});return(0,s.jsx)("input",{type:"text",value:e,onChange:e=>c(e.target.value),placeholder:i.placeholder,disabled:d,autoFocus:u,className:p})}case"number":case"currency":{let e="number"==typeof o?o:o?Number(o):"";return(0,s.jsx)("input",{type:"number",value:e,onChange:e=>c("currency"===i.type?parseFloat(e.target.value)||0:parseInt(e.target.value)||0),placeholder:i.placeholder,disabled:d,autoFocus:u,min:null===(a=i.validation)||void 0===a?void 0:null===(t=a.find(e=>"min"===e.type))||void 0===t?void 0:t.value,max:null===(n=i.validation)||void 0===n?void 0:null===(r=n.find(e=>"max"===e.type))||void 0===r?void 0:r.value,className:p})}case"select":{let e="string"==typeof o?o:String(o||"");return(0,s.jsxs)("select",{value:e,onChange:e=>c(e.target.value),disabled:d,autoFocus:u,className:p,children:[(0,s.jsx)("option",{value:"",children:i.placeholder||"Select ".concat(i.label)}),null===(l=i.options)||void 0===l?void 0:l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})}case"boolean":return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:!!o,onChange:e=>c(e.target.checked),disabled:d,autoFocus:u,className:"w-4 h-4 text-primary-600 bg-zinc-800 border-zinc-600 rounded focus:ring-primary-500"}),(0,s.jsx)("span",{className:"text-sm text-zinc-300",children:"Yes"})]});case"percentage":{let e="number"==typeof o?100*o:o?Number(o):"";return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:e,onChange:e=>c((parseFloat(e.target.value)||0)/100),placeholder:i.placeholder,disabled:d,autoFocus:u,min:"0",max:"100",className:p}),(0,s.jsx)("span",{className:"absolute right-3 top-2 text-zinc-400",children:"%"})]})}default:{let e="string"==typeof o?o:String(o||"");return(0,s.jsx)("input",{type:"text",value:e,onChange:e=>c(e.target.value),placeholder:i.placeholder,disabled:d,autoFocus:u,className:p})}}};var j=a(33907);let N=e=>{var t;let{field:a,value:r,onChange:n,errors:l=[],disabled:i=!1}=e;l.length;let o=null===(t=l.find(e=>"error"===e.severity))||void 0===t?void 0:t.message,c=a.suggestions||[];return 0===c.length?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-white",children:[a.label,a.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:"string"==typeof r?r:"",onChange:e=>n(e.target.value,"suggestion"),placeholder:a.placeholder,disabled:i,className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-600 rounded-lg text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-primary-500"}),o&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:o})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 text-primary-400"}),(0,s.jsxs)("label",{className:"text-sm font-medium text-white",children:[a.label,a.required&&(0,s.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]})]}),a.description&&(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:a.description}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.map((e,t)=>(0,s.jsx)("button",{onClick:()=>n(w(e,a),"suggestion"),disabled:i,className:"\n              px-3 py-2 text-left rounded-lg border transition-all duration-200 text-sm\n              ".concat(r===w(e,a)?"bg-primary-600 border-primary-500 text-white shadow-lg":"bg-zinc-800/50 border-zinc-600/50 text-zinc-300 hover:bg-zinc-700/50 hover:border-zinc-500/50","\n              ").concat(i?"opacity-50 cursor-not-allowed":"cursor-pointer","\n            "),children:e},t))}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"text",value:"string"!=typeof r||c.includes(r)?"":r,onChange:e=>n(e.target.value,"suggestion"),placeholder:"Or enter custom ".concat(a.label.toLowerCase(),"..."),disabled:i,className:"w-full px-3 py-2 bg-zinc-800/50 border border-zinc-600/50 rounded-lg text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500/50 text-sm"})}),o&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:o})]})};function w(e,t){switch(t.type){case"number":{if(e.includes("-")){let t=e.split("-").map(e=>e.trim()),a=t.map(e=>parseInt(e,10));if(2===t.length&&a.every(e=>!isNaN(e))){let[e,t]=a;return Math.round((e+t)/2)}}let t=parseInt(e.replace(/\D/g,""),10);return isNaN(t)?e:t}case"currency":{if(e.includes("-")){let t=e.split("-").map(e=>e.trim());if(2===t.length){let e=z(t[0]),a=z(t[1]);if(null!==e&&null!==a)return Math.round((e+a)/2)}}let t=z(e);return null!==t?t:e}case"boolean":{let t=e.toLowerCase().trim();if("yes"===t||"true"===t||"1"===t)return!0;if("no"===t||"false"===t||"0"===t)return!1;return e}default:return e}}function z(e){let t=e.replace(/[€£$]/g,"").trim(),a=1,r=t;t.includes("K")?(a=1e3,r=t.replace("K","")):t.includes("M")&&(a=1e6,r=t.replace("M",""));let s=parseFloat(r.replace(/,/g,""));return isNaN(s)?null:s*a}let k=e=>{let{context:t}=e,a=(e=>{switch(e){case"manual_form":default:return b;case"conversational":return c;case"suggestion":return N;case"fuzzy_search":return g;case"file_upload":return x}})(t.method);return(0,s.jsx)(a,{...e})},C=e=>{let{method:t="manual_form",onDataCollected:a,onProgressUpdate:l,onComplete:i,initialData:o={},disabled:c=!1,className:d=""}=e,[u,m]=(0,n.useState)(()=>{let e=new Map;return Object.entries(o).forEach(t=>{let[a,r]=t;if(null!=r){let t={fieldId:a,value:r,method:"manual_form",confidence:.8,source:"initial_data",timestamp:new Date};e.set(a,t)}}),e}),p=(0,n.useCallback)((e,t)=>{let s={fieldId:e,value:t,method:"manual_form",confidence:1,source:"user_input",timestamp:new Date};m(t=>{let a=new Map(t);return a.set(e,s),a});let n=Array.from(u.values());n.push(s),null==a||a(n);let o=Object.values(r),c=n.length,d=o.length;null==l||l({overallProgress:c/d,completedFields:c,totalFields:d});let p=o.filter(e=>e.required);p.filter(e=>n.some(t=>t.fieldId===e.id&&void 0!==t.value&&""!==t.value)).length===p.length&&(null==i||i(n))},[u,a,l,i]),h=Object.values(r),x=u.size,v=h.length;return(0,s.jsxs)("div",{className:"space-y-6 ".concat(d),children:[(0,s.jsxs)("div",{className:"bg-zinc-800/50 rounded-lg p-4 border border-zinc-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white",children:"Complete the Form"}),(0,s.jsxs)("span",{className:"text-xs text-zinc-400",children:[x,"/",v," fields"]})]}),(0,s.jsx)("div",{className:"w-full bg-zinc-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(x/v*100,"%")}})})]}),(0,s.jsx)("div",{className:"space-y-4",children:h.map(e=>{var t;return(0,s.jsx)(k,{field:e,value:null===(t=u.get(e.id))||void 0===t?void 0:t.value,onChange:t=>p(e.id,t),errors:[],context:{session:{id:"manual-form-session",fields:[],responses:new Map,completedFieldIds:new Set,method:"manual_form",startedAt:new Date,lastActivity:new Date,isComplete:!1,validationErrors:new Map},previousResponses:Array.from(u.values()),method:"manual_form"},disabled:c},e.id)})})]})}},65892:function(e,t,a){a.r(t),a.d(t,{ValuationFlow:function(){return p}});var r=a(57437),s=a(2265),n=a(44134),l=a(55513),i=a(30761),o=a(38691),c=a(69419);let d=(0,s.lazy)(()=>a.e(595).then(a.bind(a,70595)).then(e=>({default:e.Results}))),u=(0,s.lazy)(()=>Promise.all([a.e(584),a.e(61)]).then(a.bind(a,61)).then(e=>({default:e.ConversationalLayout}))),m=e=>{let{message:t="Loading..."}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),(0,r.jsx)("span",{className:"text-zinc-600",children:t})]})})},p=e=>{let{reportId:t,flowType:a,onComplete:n,initialQuery:l=null,autoSend:i=!1}=e;return"conversational"===a?(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(m,{message:"Loading conversational flow..."}),children:(0,r.jsx)(u,{reportId:t,onComplete:n,initialQuery:l,autoSend:i})}):(0,r.jsx)(h,{reportId:t,onComplete:n})},h=e=>{let{reportId:t,onComplete:u}=e,{result:p,isCalculating:h,calculateValuation:x,setCollectedData:v}=(0,o.useValuationStore)(),{user:f}=(0,i.a)(),g=(0,s.useCallback)(e=>{v(e)},[v]),b=(0,s.useCallback)(async e=>{v(e);try{await x()}catch(e){c.a.error("Valuation calculation failed",{error:e,reportId:t})}},[v,x,t]),y=(0,s.useCallback)(e=>{c.a.debug("Manual flow progress update",{progress:e.overallProgress,completedFields:e.completedFields,totalFields:e.totalFields})},[]);return(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,r.jsx)(n.hK,{method:"manual_form",onDataCollected:g,onProgressUpdate:y,onComplete:b})}),(0,r.jsx)(l.x,{onRefresh:()=>window.location.reload(),onDownload:async()=>{if(p)try{let{DownloadService:e}=await Promise.all([a.e(581),a.e(673)]).then(a.bind(a,55673));await e.downloadPDF(p,{format:"pdf",filename:"valuation-".concat(Date.now(),".pdf")})}catch(e){c.a.error("PDF download failed",{error:e,reportId:t})}},onFullScreen:()=>{},isGenerating:h,user:f,valuationName:"Manual Valuation",valuationId:null==p?void 0:p.valuation_id,activeTab:"preview",onTabChange:()=>{}}),p&&(0,r.jsx)("div",{className:"border-t border-gray-200",children:(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(m,{message:"Loading results..."}),children:(0,r.jsx)(d,{})})})]})};h.displayName="ManualFlow",p.displayName="ValuationFlow"}}]);