"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{5881:function(e,t,a){a.r(t),a.d(t,{ConversationalLayout:function(){return O}});var s=a(57437),l=a(2265),n=a(9985),i=a(18710),o=a(1953),r=a(519),d=a(93120),c=a(30761),u=a(46854),m=a(87273),p=a(38691),x=a(45396),h=a(69419),f=a(13184),v=a(68215);function b(){let e=function(){let{dispatch:e}=N();return e}(),t=(0,l.useCallback)(t=>{e({type:"SET_SESSION_ID",payload:t})},[e]),a=(0,l.useCallback)(t=>{e({type:"SET_PYTHON_SESSION_ID",payload:t})},[e]),s=(0,l.useCallback)(t=>{e({type:"SET_RESTORED",payload:t})},[e]),n=(0,l.useCallback)(t=>{e({type:"SET_LOADING",payload:t})},[e]),i=(0,l.useCallback)(t=>{e({type:"SET_INITIALIZED",payload:t})},[e]),o=(0,l.useCallback)(t=>{e({type:"SET_ERROR",payload:t})},[e]),r=(0,l.useCallback)(t=>{e({type:"ADD_MESSAGE",payload:t})},[e]),d=(0,l.useCallback)(t=>{e({type:"SET_MESSAGES",payload:t})},[e]),c=(0,l.useCallback)(()=>{e({type:"CLEAR_MESSAGES"})},[e]),u=(0,l.useCallback)(t=>{e({type:"SET_VALUATION_RESULT",payload:t})},[e]),m=(0,l.useCallback)(t=>{e({type:"SET_GENERATING",payload:t})},[e]),p=(0,l.useCallback)(t=>{e({type:"SET_BUSINESS_PROFILE",payload:t})},[e]),x=(0,l.useCallback)(t=>{e({type:"SET_PROFILE_LOADING",payload:t})},[e]),h=(0,l.useCallback)(t=>{e({type:"SET_ACTIVE_TAB",payload:t})},[e]),f=(0,l.useCallback)(t=>{e({type:"SET_FULLSCREEN",payload:t})},[e]),v=(0,l.useCallback)(t=>{e({type:"SET_REGENERATION_WARNING",payload:t})},[e]),b=(0,l.useCallback)(t=>{e({type:"SET_PENDING_RESULT",payload:t})},[e]),y=(0,l.useCallback)(e=>{},[]),g=(0,l.useCallback)((t,a,s)=>{e({type:"SET_SESSION_ID",payload:t}),void 0!==a&&e({type:"SET_PYTHON_SESSION_ID",payload:a}),void 0!==s&&e({type:"SET_RESTORED",payload:s}),e({type:"SET_LOADING",payload:!0})},[e]);return{setSessionId:t,setPythonSessionId:a,setRestored:s,setLoading:n,setInitialized:i,setError:o,addMessage:r,setMessages:d,clearMessages:c,setValuationResult:u,setGenerating:m,setBusinessProfile:p,setProfileLoading:x,setActiveTab:h,setFullScreen:f,setRegenerationWarning:v,setPendingResult:b,setShowOutOfCreditsModal:y,initializeSession:g,startConversation:(0,l.useCallback)(t=>{e({type:"SET_BUSINESS_PROFILE",payload:t}),e({type:"SET_LOADING",payload:!1}),e({type:"SET_INITIALIZED",payload:!0}),e({type:"SET_ERROR",payload:null})},[e]),completeValuation:(0,l.useCallback)(t=>{e({type:"SET_VALUATION_RESULT",payload:t}),e({type:"SET_GENERATING",payload:!1}),e({type:"SET_LOADING",payload:!1})},[e]),resetConversation:(0,l.useCallback)(()=>{e({type:"RESET_STATE"})},[e])}}let y=(0,l.createContext)(void 0);function N(){let e=(0,l.useContext)(y);if(void 0===e)throw Error("useConversationContext must be used within a ConversationProvider");return e}function g(){let{state:e}=N();return e}var S=a(74232),j=a(64762);let w=l.memo(e=>{let{showPreConversationSummary:t,onTogglePreConversationSummary:n}=e,{user:i,isAuthenticated:o}=(0,c.a)(),{startConversation:r,setBusinessProfile:d,setProfileLoading:u}=b(),[m,p]=(0,l.useState)(null),[x,f]=(0,l.useState)(!0),[v,y]=(0,l.useState)(null),N=(0,l.useCallback)(async e=>{try{h.pL.info("Starting intelligent conversation with pre-filled data");let t=j.C.transformToConversationStartRequest(e,{time_commitment:"detailed",focus_area:"all"});(null==i?void 0:i.id)&&(t.user_id=i.id,h.pL.info("Added user_id for intelligent triage",{userId:i.id}));let{api:s}=await a.e(438).then(a.bind(a,54438)),l=await s.startConversation(t);h.pL.info("Intelligent conversation started",{response:l}),l.valuation_result||r(e)}catch(e){h.pL.error("Error starting intelligent conversation",{error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),y("Failed to start intelligent conversation. Using manual flow."),r(null)}},[null==i?void 0:i.id,r]);return((0,l.useEffect)(()=>{(async()=>{try{if(f(!0),y(null),!o||!(null==i?void 0:i.id)){h.pL.info("No authenticated user, skipping profile fetch"),f(!1);return}let e=i.id;h.pL.debug("Fetching business profile for instant valuation");let t=await j.C.fetchUserBusinessData(e);t?(p(t),d(t),h.pL.info("Business profile loaded",{profileData:t}),N(t)):(h.pL.info("No business profile found, starting fresh conversation"),r(null))}catch(e){h.pL.error("Error fetching business profile",{error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),y("Failed to load business profile. Starting fresh conversation.")}finally{f(!1),u(!1)}})()},[o,null==i?void 0:i.id,d,u,r,N]),m||x||v)?(0,s.jsxs)(s.Fragment,{children:[m&&!x&&(0,s.jsx)("div",{className:"border-b border-zinc-800 bg-zinc-900/30 px-3 sm:px-4 md:px-6 py-3 mx-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(S.Z,{className:"w-5 h-5 text-primary-400 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white truncate",children:m.company_name||"Your Business"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400",children:[m.industry&&(0,s.jsx)("span",{className:"bg-zinc-800 px-2 py-1 rounded",children:m.industry}),m.business_type&&(0,s.jsx)("span",{className:"bg-zinc-800 px-2 py-1 rounded",children:m.business_type}),m.revenue_range&&(0,s.jsx)("span",{className:"bg-zinc-800 px-2 py-1 rounded",children:m.revenue_range})]})]}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:[j.C.getDataCompleteness(m),"% complete"]})]})}),t&&m&&(0,s.jsx)("div",{className:"mx-4 mb-4",children:(0,s.jsx)("div",{className:"bg-primary-900/20 border border-primary-700/30 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-primary-400 text-sm",children:"\uD83E\uDDE0"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-primary-300 mb-2",children:"Intelligent Triage Active"}),(0,s.jsx)("p",{className:"text-sm text-primary-200 mb-3",children:"We found your business profile! We'll skip the questions we already know and only ask for missing information."}),(()=>{let e=(0,l.useMemo)(()=>j.C.getFieldAnalysis(m),[]);return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-primary-300",children:"Data completeness:"}),(0,s.jsxs)("span",{className:"font-semibold text-primary-200",children:[e.completeness,"%"]}),(0,s.jsx)("div",{className:"flex-1 bg-zinc-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.completeness,"%")}})})]}),(0,s.jsxs)("div",{className:"text-sm text-primary-200",children:[(0,s.jsx)("span",{className:"text-primary-300",children:"Estimated time:"})," ",e.estimatedTime," minutes"]}),e.complete.length>0&&(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-primary-300",children:"We already know:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.complete.map(e=>(0,s.jsx)("span",{className:"bg-primary-800/50 px-2 py-1 rounded text-xs",children:e.replace("_"," ")},e))})]}),e.priority.length>0&&(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("span",{className:"text-primary-300",children:"We need to ask about:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.priority.map(e=>(0,s.jsx)("span",{className:"bg-accent-800/50 px-2 py-1 rounded text-xs",children:e.replace("_"," ")},e))})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)("button",{onClick:()=>{n(),N(m)},className:"px-4 py-2 bg-accent-600 hover:bg-accent-500 text-white rounded-lg text-sm font-medium transition-colors",children:"Start Smart Conversation"}),(0,s.jsx)("button",{onClick:()=>{n(),r(null)},className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-zinc-300 rounded-lg text-sm font-medium transition-colors",children:"Start Fresh"})]})]})})()]})]})})}),v&&(0,s.jsx)("div",{className:"border-b border-rust-700 bg-rust-500/20 px-3 sm:px-4 md:px-6 py-3 mx-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-rust-300",children:[(0,s.jsx)("span",{children:"⚠️"}),(0,s.jsx)("span",{children:v})]})}),x&&(0,s.jsx)("div",{className:"flex items-center justify-center h-32 mx-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"Loading your business profile..."})]})})]}):null});w.displayName="BusinessProfileSection";var C=a(49336),E=a(96629);let _=(0,l.memo)(e=>{let{sessionId:t,userId:a,restoredMessages:l,isRestoring:n,isRestorationComplete:i,isSessionInitialized:o,pythonSessionId:r,onPythonSessionIdReceived:d,onValuationComplete:c,onValuationStart:u,onReportUpdate:m,onDataCollected:p,onValuationPreview:x,onCalculateOptionAvailable:h,onProgressUpdate:f,onReportSectionUpdate:v,onSectionLoading:b,onSectionComplete:y,onReportComplete:N,onContextUpdate:g,onHtmlPreviewUpdate:S,initialMessage:j,autoSend:w,initialData:_}=e;return(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(C.S,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-zinc-400 mb-4",children:"Chat temporarily unavailable. Please refresh."}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Refresh"})]})}),children:(0,s.jsx)(E.E,{sessionId:t,userId:a,initialMessages:l,isRestoring:n&&!i,isSessionInitialized:o,pythonSessionId:r,isRestorationComplete:i,onPythonSessionIdReceived:d,onValuationComplete:c,onValuationStart:u,onReportUpdate:m,onDataCollected:p,onValuationPreview:x,onCalculateOptionAvailable:h,onProgressUpdate:f,onReportSectionUpdate:v,onSectionLoading:b,onSectionComplete:y,onReportComplete:N,onContextUpdate:g,onHtmlPreviewUpdate:S,className:"h-full",placeholder:"Ask about your business valuation...",initialMessage:j,autoSend:w,initialData:_})})})});_.displayName="ConversationPanel";var I=a(53225),k=a(39451),T=a(20557),R=a(38263),D=a(7054),L=a(72144);let P=l.lazy(()=>Promise.all([a.e(216),a.e(493),a.e(181)]).then(a.bind(a,74181)).then(e=>({default:e.ValuationInfoPanel}))),z=l.lazy(()=>a.e(595).then(a.bind(a,70595)).then(e=>({default:e.Results}))),A=e=>{let{message:t="Loading..."}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),(0,s.jsx)("span",{className:"text-zinc-600",children:t})]})})},U=l.memo(e=>{let{className:t=""}=e,a=g(),[n,i]=(0,l.useState)("preview");return(0,s.jsxs)("div",{className:"h-full min-h-[400px] lg:min-h-0 flex flex-col bg-white overflow-hidden ".concat(t),children:[(0,s.jsx)("div",{className:"flex border-b border-zinc-200",children:[{id:"preview",label:"Preview"},{id:"source",label:"Source"},{id:"info",label:"Info"}].map(e=>(0,s.jsx)("button",{onClick:()=>i(e.id),className:"px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat(n===e.id?"border-primary-500 text-primary-600":"border-transparent text-zinc-500 hover:text-zinc-700 hover:border-zinc-300"),children:e.label},e.id))}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(()=>{var e;let t=!!(null===(e=a.valuationResult)||void 0===e?void 0:e.html_report),i=a.isGenerating;switch(n){case"preview":return(0,s.jsxs)("div",{className:"h-full",children:[!t&&!i&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 sm:p-8 text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-zinc-100 flex items-center justify-center mb-3 sm:mb-4",children:(0,s.jsx)(I.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-zinc-400"})}),(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-zinc-900 mb-2",children:"Valuation Preview"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-zinc-500 max-w-xs",children:"Your valuation report will appear here once the conversation is complete."})]}),t?(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(A,{message:"Loading report..."}),children:(0,s.jsx)(z,{})}):i?(0,s.jsx)(L.U,{}):null]});case"source":return(0,s.jsx)(T.b,{result:a.valuationResult});case"info":return(0,s.jsx)("div",{className:"h-full",children:a.isGenerating?(0,s.jsx)(R.G,{steps:D.O,variant:"light",centered:!0}):a.valuationResult?(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(A,{message:"Loading calculation details..."}),children:(0,s.jsx)(P,{result:a.valuationResult})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 sm:p-8 text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-zinc-100 flex items-center justify-center mb-3 sm:mb-4",children:(0,s.jsx)(k.Z,{className:"w-6 h-6 sm:w-8 sm:h-8 text-zinc-400"})}),(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-zinc-900 mb-2",children:"Calculation Details"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-zinc-500 max-w-xs",children:"Detailed calculation breakdown will appear here once the conversation is complete."})]})});default:return null}})()})]})});U.displayName="ReportPanel";let O=l.memo(e=>{var t,y,N,S,j,C,E;let{reportId:I,onComplete:k,initialQuery:T=null,autoSend:R=!1}=e,{user:D}=(0,c.a)(),L=g(),P=b(),{setResult:z,updateFormData:A}=(0,p.useValuationStore)(),[O,F]=(0,l.useState)([]),[G,M]=(0,l.useState)(!1),V=(0,l.useCallback)(e=>{F(e);let t=(0,x.a)(e);A(t),h.pL.info("Conversational flow collected data:",t)},[A]),W=(0,l.useCallback)(e=>{let t=(0,x.a)(e);A(t),h.pL.info("Conversational flow collection complete:",t),M(!1)},[A]),H=(0,l.useCallback)(e=>{h.pL.debug("Conversational flow progress:",e)},[]),[B,Z]=(0,l.useState)(!1),[Y,q]=(0,l.useState)(!1),[X,J]=(0,l.useState)("chat"),[K,Q]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(()=>{try{let e=localStorage.getItem("upswitch-panel-width");if(e){let t=parseFloat(e);if(!isNaN(t)&&t>=d.uS.MIN_WIDTH&&t<=d.uS.MAX_WIDTH)return t}}catch(e){h.pL.warn("Failed to load saved panel width",{error:e})}return d.uS.DEFAULT_WIDTH}),[et,ea]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>q(window.innerWidth<d.Gh);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{try{localStorage.setItem("upswitch-panel-width",$.toString())}catch(e){h.pL.warn("Failed to save panel width",{error:e})}},[$]),(0,l.useEffect)(()=>{L.valuationResult&&z(L.valuationResult)},[L.valuationResult,z]);let es=(0,l.useCallback)(e=>{let t=Math.max(d.uS.MIN_WIDTH,Math.min(d.uS.MAX_WIDTH,e));2>Math.abs(t-d.uS.DEFAULT_WIDTH)?ee(d.uS.DEFAULT_WIDTH):ee(t)},[]),el=(0,l.useCallback)(()=>{let e=(0,f.rg)();window.location.href=m.Z.reportById(e)},[]),en=(0,l.useCallback)(async()=>{if(L.valuationResult&&L.valuationResult.html_report)try{var e,t,s,l,n,i;let{DownloadService:o}=await Promise.all([a.e(216),a.e(493),a.e(673)]).then(a.bind(a,55673)),r={companyName:(null===(e=L.businessProfile)||void 0===e?void 0:e.company_name)||"Company",valuationAmount:L.valuationResult.equity_value_mid,valuationDate:new Date,method:L.valuationResult.methodology||"DCF Analysis",confidenceScore:L.valuationResult.confidence_score,inputs:{revenue:null===(t=L.businessProfile)||void 0===t?void 0:t.revenue,ebitda:null===(s=L.businessProfile)||void 0===s?void 0:s.ebitda,industry:null===(l=L.businessProfile)||void 0===l?void 0:l.industry,employees:null===(n=L.businessProfile)||void 0===n?void 0:n.employees},assumptions:{growth_rate:"5%",discount_rate:"10%",terminal_growth:"2%"},htmlContent:L.valuationResult.html_report||""};await o.downloadPDF(r,{format:"pdf",filename:o.getDefaultFilename(null===(i=L.businessProfile)||void 0===i?void 0:i.company_name,"pdf")})}catch(e){h.pL.error("PDF download failed",{error:e,reportId:I})}},[L.valuationResult,L.businessProfile,I]),ei=(0,l.useCallback)(e=>{h.pL.info("Python session ID received, updating conversation state",{sessionId:e,reportId:I}),P.setPythonSessionId(e)},[P,I]),eo=(0,l.useCallback)(async e=>{P.setValuationResult(e),k(e),D||void 0===e.creditsRemaining||u.u.setCredits(e.creditsRemaining)},[P,k,D]),er=!!D||u.u.hasCredits();return(0,s.jsx)(v.h,{hasCredits:er,isBlocked:!1,showOutOfCreditsModal:!1,onCloseModal:()=>{},onSignUp:()=>{h.pL.info("User clicked sign up from out of credits modal")},onTryManual:()=>{h.pL.info("User clicked try manual flow from out of credits modal")},children:(0,s.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,s.jsx)(r.ValuationToolbar,{onRefresh:el,onDownload:en,onFullScreen:()=>Z(!0),isGenerating:L.isGenerating,user:D,valuationName:"Valuation",valuationId:null===(t=L.valuationResult)||void 0===t?void 0:t.valuation_id,activeTab:"preview",onTabChange:()=>{},companyName:null===(y=L.businessProfile)||void 0===y?void 0:y.company_name,valuationMethod:null===(N=L.valuationResult)||void 0===N?void 0:N.methodology}),L.error&&(0,s.jsx)("div",{className:"mx-4 mb-4",children:(0,s.jsxs)("div",{className:"bg-rust-500/20 border border-rust-600/30 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-rust-300",children:[(0,s.jsx)("span",{className:"text-rust-400",children:"⚠️"}),(0,s.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,s.jsx)("p",{className:"text-rust-200 text-sm mt-1",children:L.error})]})}),(0,s.jsx)(w,{showPreConversationSummary:K,onTogglePreConversationSummary:()=>Q(!1)}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden mx-4 my-4 rounded-lg border border-zinc-800",style:{transition:"width 150ms ease-out"},children:[(0,s.jsx)("div",{className:"".concat(Y?"chat"===X?"w-full":"hidden":""," h-full flex flex-col bg-zinc-900 border-r border-zinc-800 w-full lg:w-auto"),style:{width:Y?"100%":"".concat($,"%")},children:(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:et?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Data Collection"}),(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:"Using the same data collection system as manual forms, but in conversational context."})]}),(0,s.jsx)(n.DataCollection,{method:"manual_form",onDataCollected:V,onProgressUpdate:H,onComplete:W,initialData:{company_name:null===(S=L.businessProfile)||void 0===S?void 0:S.company_name,revenue:null===(j=L.businessProfile)||void 0===j?void 0:j.revenue,ebitda:null===(C=L.businessProfile)||void 0===C?void 0:C.ebitda,number_of_employees:null===(E=L.businessProfile)||void 0===E?void 0:E.number_of_employees}})]}):(0,s.jsx)(_,{sessionId:L.sessionId,userId:null==D?void 0:D.id,restoredMessages:L.messages.filter(e=>e.isComplete),isRestoring:!1,isRestorationComplete:L.isRestored,isSessionInitialized:L.isInitialized,pythonSessionId:L.pythonSessionId,onPythonSessionIdReceived:ei,onValuationComplete:eo,onValuationStart:()=>P.setGenerating(!0),onReportUpdate:()=>{},onDataCollected:e=>{e.field&&void 0!==e.value&&h.pL.debug("Data collected from conversational flow",{field:e.field,value:e.value})},onValuationPreview:()=>{},onCalculateOptionAvailable:()=>{},onProgressUpdate:()=>{},onReportSectionUpdate:()=>{},onSectionLoading:()=>{},onSectionComplete:()=>{},onReportComplete:()=>{},onContextUpdate:()=>{},onHtmlPreviewUpdate:()=>{},initialMessage:T,autoSend:R})})}),(0,s.jsx)(o.Y,{onResize:es,leftWidth:$,isMobile:Y}),(0,s.jsx)("div",{className:"".concat(Y?"preview"===X?"w-full":"hidden":""," h-full min-h-[400px] lg:min-h-0 w-full lg:w-auto border-t lg:border-t-0 border-zinc-800"),style:{width:Y?"100%":"".concat(100-$,"%")},children:(0,s.jsx)(U,{})})]}),Y&&(0,s.jsxs)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 bg-zinc-800 p-1 rounded-full shadow-lg",children:[(0,s.jsx)("button",{onClick:()=>J("chat"),className:"px-4 py-2 rounded-full transition-colors ".concat("chat"===X?"bg-accent-600 text-white":"text-zinc-400 hover:text-white"),children:"Chat"}),(0,s.jsx)("button",{onClick:()=>J("preview"),className:"px-4 py-2 rounded-full transition-colors ".concat("preview"===X?"bg-accent-600 text-white":"text-zinc-400 hover:text-white"),children:"Preview"})]}),(0,s.jsx)(i.x,{isOpen:B,onClose:()=>Z(!1),title:"Valuation - Full Screen",children:(0,s.jsx)(U,{className:"h-full"})})]})})});O.displayName="ConversationalLayout"}}]);