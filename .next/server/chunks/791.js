"use strict";exports.id=791,exports.ids=[791],exports.modules={34791:(e,a,l)=>{l.r(a),l.d(a,{ValuationFlow:()=>m});var o=l(10326),s=l(17577),n=l(97810),t=l(45055),i=l(33741);let d=(0,s.lazy)(()=>l.e(979).then(l.bind(l,64979)).then(e=>({default:e.Results}))),r=(0,s.lazy)(()=>l.e(105).then(l.bind(l,29105)).then(e=>({default:e.StreamingChat}))),c=(0,s.lazy)(()=>l.e(638).then(l.bind(l,49638)).then(e=>({default:e.ValuationToolbar}))),u=(0,s.lazy)(()=>l.e(118).then(l.bind(l,14118)).then(e=>({default:e.DataCollection}))),p=({message:e="Loading..."})=>o.jsx("div",{className:"flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),o.jsx("span",{className:"text-zinc-600",children:e})]})}),m=({reportId:e,flowType:a,onComplete:l,initialQuery:n=null,autoSend:t=!1})=>"conversational"===a?o.jsx(s.Suspense,{fallback:o.jsx(p,{message:"Loading conversational flow..."}),children:o.jsx(r,{sessionId:e,userId:void 0,onMessageComplete:()=>{},onValuationComplete:l,onValuationStart:()=>{},onReportUpdate:()=>{},onDataCollected:()=>{},onValuationPreview:()=>{},onCalculateOptionAvailable:()=>{},initialMessage:n||void 0,autoSend:t})}):o.jsx(x,{reportId:e,onComplete:l}),x=({reportId:e,onComplete:a})=>{let{result:r,isCalculating:m,calculateValuation:x,setCollectedData:f}=(0,t.useValuationStore)(),{user:h}=(0,n.a)(),b=(0,s.useCallback)(e=>{f(e)},[f]),g=(0,s.useCallback)(async a=>{f(a);try{await x()}catch(a){i.a.error("Valuation calculation failed",{error:a,reportId:e})}},[f,x,e]),j=(0,s.useCallback)(e=>{i.a.debug("Manual flow progress update",{progress:e.overallProgress,completedFields:e.completedFields,totalFields:e.totalFields})},[]);return(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o.jsx(s.Suspense,{fallback:o.jsx(p,{message:"Loading data collection..."}),children:o.jsx(u,{method:"manual_form",onDataCollected:b,onProgressUpdate:j,onComplete:g})})}),o.jsx(s.Suspense,{fallback:o.jsx(p,{message:"Loading toolbar..."}),children:o.jsx(c,{onRefresh:()=>window.location.reload(),onDownload:async()=>{if(r)try{let{DownloadService:e}=await l.e(887).then(l.bind(l,12887));await e.downloadPDF(r,{format:"pdf",filename:`valuation-${Date.now()}.pdf`})}catch(a){i.a.error("PDF download failed",{error:a,reportId:e})}},onFullScreen:()=>{},isGenerating:m,user:h,valuationName:"Manual Valuation",valuationId:r?.valuation_id,activeTab:"preview",onTabChange:()=>{}})}),r&&o.jsx("div",{className:"border-t border-gray-200",children:o.jsx(s.Suspense,{fallback:o.jsx(p,{message:"Loading results..."}),children:o.jsx(d,{})})})]})};x.displayName="ManualFlow",m.displayName="ValuationFlow"}};