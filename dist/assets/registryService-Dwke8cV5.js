import{a as i}from"./index-ClN1mNBB.js";const p="https://upswitch-valuation-engine-production.up.railway.app",y=3e4,l=3,_=1e3,d=i.create({baseURL:p,timeout:y,headers:{"Content-Type":"application/json"}}),r=async(n,t=l,o=1)=>{try{return await n()}catch(s){if((s.code==="ECONNABORTED"||s.code==="ERR_NETWORK"||s.response?.status>=500||s.response?.status===429)&&o<t){const a=_*Math.pow(2,o-1);return console.log(`Retry attempt ${o}/${t} after ${a}ms...`),await new Promise(c=>setTimeout(c,a)),r(n,t,o+1)}throw s}},u=async(n,t)=>r(async()=>{try{const o=await d.post("/api/v1/registry/search",{company_name:n,country_code:t,limit:10});console.log("游니 Raw API response:",o.data),console.log("游니 Raw results:",o.data.results);const s=o.data.results.map(e=>{console.log("游니 Mapping result:",e);const a={result_type:e.result_type||"COMPANY",company_id:e.company_id,company_name:e.company_name,registration_number:e.registration_number,country_code:e.country_code,legal_form:e.legal_form,address:e.address,website:e.website,status:e.status||"active",confidence_score:e.confidence_score||.9,registry_name:e.registry_name,registry_url:e.registry_url};return console.log("游니 Mapped result:",a),a});return console.log("游니 Final results:",s),s}catch(o){throw console.error("Company search failed:",o),o}});export{u as searchCompanies};
